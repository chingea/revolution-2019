{"ast":null,"code":"var _jsxFileName = \"/Users/charles/Documents/GitHub/1/revolution-2019/src/components/prologue/SceneThree.js\";\nimport React from \"react\";\nimport $ from \"jquery\";\nimport { Tweet } from 'react-twitter-widgets';\nimport scrollama from \"scrollama\";\nimport mapboxgl from \"mapbox-gl\";\nimport economist from \"../../media/prologue/logo-economist.png\";\nimport ft from \"../../media/prologue/logo-ft.png\";\nimport npr from \"../../media/prologue/logo-npr.png\";\nimport ny from \"../../media/prologue/logo-new-yorker.png\";\nimport nyt from \"../../media/prologue/logo-new-york-times.png\";\nimport aj from \"../../media/prologue/logo-aljazeera.png\";\nimport an from \"../../media/prologue/logo-annahar.png\";\nimport vox from \"../../media/prologue/logo-vox.png\";\nimport gu from \"../../media/prologue/logo-guardian.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst articles = [{\n  title: \"Digital media fuel global protests but can be used against them\",\n  source: \"The Economist\",\n  url: \"https://www.economist.com/international/2021/01/16/digital-media-fuel-global-protests-but-can-be-used-against-them\",\n  tag: \"article-1\",\n  logo: economist,\n  text: \"Protesters in 2019 relied heavily on digital media for organisation, publicity and communication.\",\n  highlight: \"Protesters in 2019 relied heavily on digital media for organisation, publicity and communication.\"\n}, {\n  title: \"2019: the year of street protest\",\n  source: \"The Financial Times\",\n  url: \"https://www.ft.com/content/9f7e94c4-2563-11ea-9a4f-963f0ec7e134\",\n  tag: \"article-3\",\n  logo: ft,\n  text: \"Social media is a powerful organising tool everywhere — allowing protesters to crowdsource grievances, slogans and tactics.\",\n  highlight: \"Social media is a powerful organising tool everywhere — allowing protesters to crowdsource grievances, slogans and tactics.\"\n}, {\n  title: \"Lebanon's Government Is Accused Of Swarming WhatsApp To Catch Protesters\",\n  source: \"NPR\",\n  url: \"https://www.npr.org/2020/03/09/809684634/lebanons-government-is-accused-of-swarming-whatsapp-to-catch-protesters?t=1613410699449\",\n  tag: \"article-2\",\n  logo: npr,\n  text: \"They organized and shared updates on WhatsApp, streamed protests live on Twitter and highlighted police abuse on Instagram.\",\n  highlight: \"They organized and shared updates on WhatsApp, streamed protests live on Twitter and highlighted police abuse on Instagram.\"\n}, {\n  title: \"The Second Act of Social-Media Activism\",\n  source: \"The New Yorker\",\n  url: \"https://www.newyorker.com/culture/cultural-comment/the-second-act-of-social-media-activism\",\n  tag: \"article-1\",\n  logo: ny,\n  text: \"Protest guides, generated from years of on-the-ground activist experience, are readily shared over Twitter and Instagram, telling readers how to blur faces in photographs or aid in de-arrests.\",\n  highlight: \"Protest guides, generated from years of on-the-ground activist experience, are readily shared over Twitter and Instagram\"\n}, {\n  title: \"Leaderless rebellion: how social media enables global protests\",\n  source: \"The Financial Times\",\n  url: \"https://www.ft.com/content/19dc5dfe-f67b-11e9-a79c-bc9acae3b654\",\n  tag: \"article-3\",\n  logo: ft,\n  text: \"Social media also allows a movement in one place to take inspiration from news of revolts in another. The occupation of the airport in Barcelona last week was a tactic borrowed from Hong Kong. The Sudanese and Algerian uprisings this year borrowed each other’s imagery and slogans.\",\n  highlight: \"Social media also allows a movement in one place to take inspiration from news of revolts in another.\"\n}, {\n  title: \"The Story of 2019: Protests in Every Corner of the Globe\",\n  source: \"The New Yorker\",\n  url: \"https://www.newyorker.com/news/our-columnists/the-story-of-2019-protests-in-every-corner-of-the-globe\",\n  tag: \"article-1\",\n  logo: ny,\n  text: \"There may be a global contagion due to social media. Seeing protests in other places motivates people to be willing to go to the streets in their own countries.\",\n  highlight: \"There may be a global contagion due to social media.\"\n}, {\n  title: \"Why Protest Tactics Spread Like Memes\",\n  source: \"The New York Times\",\n  url: \"https://www.nytimes.com/2020/07/31/style/viral-protest-videos.html\",\n  tag: \"article-2\",\n  logo: nyt,\n  text: \"Activists from around the world do actively learn from each other and exchange tactical tips. Images of protest spread on social media reveal many other matching moments from opposite sides of the world.\",\n  highlight: \"Activists from around the world do actively learn from each other and exchange tactical tips.\"\n}, {\n  title: \"Colombia protests pile pressure on president and hamper reforms\",\n  source: \"The Financial Times\",\n  url: \"https://www.ft.com/content/a2d80d10-11ba-11ea-a225-db2f231cfeae\",\n  tag: \"article-3\",\n  logo: ft,\n  text: \"Demonstrators in Colombia have copied the tactics of protests sweeping other Latin American nations, organising via social media and beating pots and pans to press their demands.\",\n  highlight: \"Demonstrators in Colombia have copied the tactics of protests sweeping other Latin American nations\"\n}, {\n  title: \"Pots and pans ‘cacerolazo’ protests echo across Latin America\",\n  source: \"AlJazeera\",\n  url: \"https://www.aljazeera.com/news/2019/12/2/pots-and-pans-cacerolazo-protests-echo-across-latin-america\",\n  tag: \"article-2\",\n  logo: aj,\n  text: \"When 6pm struck in Colombia, the sound of banging pots and pans – the “cacerolazo” – echoed across the country like they have since the mass anti-government protest kicked off more than a week ago.\",\n  highlight: \"When 6pm struck in Colombia, the sound of banging pots and pans – the “cacerolazo” – echoed across the country\"\n}, {\n  title: \"A Cacophonous Revolution: When pans and pots become the voice of the protests\",\n  source: \"An-Nahar\",\n  url: \"https://www.annahar.com/english/article/1068283-a-cacophonous-revolution-when-pans-and-pots-become-the-voice-of-the-protests\",\n  tag: \"article-2\",\n  logo: an,\n  text: \"Cookware cacophony has been the spotlight of the Lebanese protests during the past few days, as protesters resorted to banging their pots and pans to denounce the country’s endemic corruption and escalating crisis.\",\n  highlight: \"Cookware cacophony has been the spotlight of the Lebanese protests during the past few days, as protesters resorted to banging their pots and pans\"\n}, {\n  title: \"Why protesters have been banging pots and pans outside their windows\",\n  source: \"Vox\",\n  url: \"https://www.vox.com/identities/2020/6/5/21279690/protest-george-floyd-cacerolazo-bang-pots\",\n  tag: \"article-1\",\n  logo: vox,\n  text: \"Protesters in Washington, DC, Philadelphia, and Los Angeles have all been spotted participating in cacerolazos over the past week.\",\n  highlight: \"Protesters in Washington, DC, Philadelphia, and Los Angeles have all been spotted participating in cacerolazos over the past week.\"\n}, {\n  title: \"Chile’s ‘A rapist in your path’ chant hits 200 cities\",\n  source: \"AlJazeera\",\n  url: \"https://www.aljazeera.com/news/2019/12/20/chiles-a-rapist-in-your-path-chant-hits-200-cities-map\",\n  tag: \"article-2\",\n  logo: aj,\n  text: \"From Santiago to Nairobi and Tijuana to Stockholm, women in hundreds of cities worldwide have executed a Chilean choreographed feminist performance protesting sexual assault, victim-blaming and state violence.\",\n  highlight: \"From Santiago to Nairobi and Tijuana to Stockholm, women in hundreds of cities worldwide have executed a Chilean choreographed feminist performance\"\n}, {\n  title: \"‘The rapist is you!’: why a Chilean protest chant is being sung around the world\",\n  source: \"The Guardian\",\n  url: \"https://www.theguardian.com/society/2020/feb/03/the-rapist-is-you-chilean-protest-song-chanted-around-the-world-un-iolador-en-tu-camino\",\n  tag: \"article-3\",\n  logo: gu,\n  text: \"Since November, Un Violador en Tu Camino has been sung everywhere from France and Mexico to Kenya and India as a protest against the systemic use of sexual violence to repress women.\",\n  highlight: \"Since November, Un Violador en Tu Camino has been sung everywhere from France and Mexico to Kenya and India\"\n}, {\n  title: \"The Story of 2019: Protests in Every Corner of the Globe\",\n  source: \"The New Yorker\",\n  url: \"https://www.newyorker.com/news/our-columnists/the-story-of-2019-protests-in-every-corner-of-the-globe\",\n  tag: \"article-1\",\n  logo: ny,\n  text: \"The protests of 2019 have been epochal, the fury real, and the underlying message profound for the future.\",\n  highlight: \"The protests of 2019 have been epochal, the fury real, and the underlying message profound for the future.\"\n}];\nvar config = {\n  style: 'mapbox://styles/branigan/cjz37rcb003ib1cr3s8rnkt2d',\n  accessToken: 'pk.eyJ1IjoibWJ4c29sdXRpb25zIiwiYSI6ImNrMm01aG9hdTBlZGwzbXQ1ZXVrNHNmejAifQ.QHQA0N6XPWddCXtvoODHZg',\n  showMarkers: false,\n  theme: 'dark',\n  use3dTerrain: true,\n  title: 'Glaciers of Glacier National Park',\n  subtitle: 'Change in coverage from 1998 to 2015',\n  byline: '',\n  footer: 'Source: Story text from Wikipedia, August 2019. Data from <a href=\"https://www.usgs.gov/centers/norock/science/retreat-glaciers-glacier-national-park\">USGS</a>',\n  chapters: [{\n    id: 'glacier-np',\n    alignment: 'full',\n    title: 'Glacier National Park Glaciers',\n    image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/2015-06-19_Glacier_National_Park_%28U.S.%29_8633.jpg/800px-2015-06-19_Glacier_National_Park_%28U.S.%29_8633.jpg',\n    description: 'Glacier National Park is dominated by mountains which were carved into their present shapes by the huge glaciers of the last ice age. These glaciers have largely disappeared over the last 12,000 years. Evidence of widespread glacial action is found throughout the park in the form of U-shaped valleys, cirques, arêtes, and large outflow lakes radiating like fingers from the base of the highest peaks. Since the end of the ice ages, various warming and cooling trends have occurred. The last recent cooling trend was during the Little Ice Age, which took place approximately between 1550 and 1850. During the Little Ice Age, the glaciers in the park expanded and advanced, although to nowhere near as great an extent as they had during the Ice Age.',\n    location: {\n      center: [-113.91666, 48.66451],\n      zoom: 8,\n      pitch: 0.00,\n      bearing: 0.00\n    },\n    onChapterEnter: [{\n      layer: 'gnpglaciers-1998',\n      opacity: 0.25\n    }, {\n      layer: 'glaciernp-boundary',\n      opacity: 0.25\n    }],\n    onChapterExit: [{\n      layer: 'glaciernp-boundary',\n      opacity: 0\n    }]\n  }, {\n    id: 'harrison1998',\n    alignment: 'left',\n    title: 'Harrison Glacier, 1998',\n    image: '',\n    description: 'Harrison Glacier is located in the US state of Montana in Glacier National Park. Situated on a southeast facing ridge immediately south of Mount Jackson, Harrison Glacier is the largest glacier in Glacier National Park. Compared to many of the vanishing glaciers in Glacier National Park, Harrison Glacier has a much higher altitude accumulation zone (approximately 9,000 feet (2,700 m)) which has allowed it to maintain some equilibrium in its glacier mass balance.',\n    location: {\n      center: [-113.72917, 48.58938],\n      zoom: 12.92,\n      pitch: 39.50,\n      bearing: 36.00\n    },\n    onChapterEnter: [],\n    onChapterExit: [// {\n      //     layer: 'gnpglaciers-2015',\n      //     opacity: 0\n      // }\n    ]\n  }, {\n    id: 'harrison2015',\n    alignment: 'left',\n    title: 'Harrison Glacier, 2015',\n    image: '',\n    description: 'Between 1998 and 2015, Harrison Glacier lost 169 acres of surface area (about 37%).',\n    location: {\n      center: [-113.72917, 48.58938],\n      zoom: 12.92,\n      pitch: 39.50,\n      bearing: 36.00\n    },\n    onChapterEnter: [{\n      layer: 'gnpglaciers-2015',\n      opacity: 0.25\n    }],\n    onChapterExit: [{\n      layer: 'gnpglaciers-2015',\n      opacity: 0\n    }]\n  }, {\n    id: 'blackfoot1998',\n    alignment: 'left',\n    title: 'Blackfoot Glacier, 1998',\n    image: '',\n    description: 'Blackfoot Glacier is the second largest of the remaining 25 glaciers in Glacier National Park, Montana. Blackfoot Glacier is just to the north of Blackfoot Mountain and near Jackson Glacier. When first documented in 1850, the glacier also included the now separate Jackson Glacier and together, they covered 1,875 acres (7.59 km2). In 1850, there were an estimated 150 glaciers in the park. Glaciologists have stated that by the year 2030, all the glaciers in the park may disappear.',\n    location: {\n      center: [-113.66573, 48.59181],\n      zoom: 12.92,\n      pitch: 51.50,\n      bearing: -26.40\n    },\n    onChapterEnter: [],\n    onChapterExit: []\n  }, {\n    id: 'blackfoot2015',\n    alignment: 'left',\n    title: 'Blackfoot Glacier, 2015',\n    image: '',\n    description: 'Between 1998 and 2015, Blackfoot Glacier lost 31 acres of surface area (about 8%).',\n    location: {\n      center: [-113.66573, 48.59181],\n      zoom: 12.92,\n      pitch: 51.50,\n      bearing: -26.40\n    },\n    onChapterEnter: [{\n      layer: 'gnpglaciers-2015',\n      opacity: 0.25\n    }],\n    onChapterExit: [{\n      layer: 'gnpglaciers-2015',\n      opacity: 0\n    }]\n  }, {\n    id: 'agassiz1998',\n    alignment: 'left',\n    title: 'Agassiz Glacier, 1998',\n    image: '',\n    description: 'Agassiz Glacier is in Glacier National Park in the U.S. state of Montana. It is named after Louis Agassiz, a Swiss-American glaciologist. The glacier is situated in a cirque to the southeast of Kintla Peak west of the Continental Divide. Agassiz Glacier is one of several glaciers that have been selected for monitoring by the U.S. Geological Survey\\'s Glacier Monitoring Research program, which is researching changes to the mass balance of glaciers in and surrounding Glacier National Park.',\n    location: {\n      center: [-114.15881, 48.93439],\n      zoom: 13.51,\n      pitch: 41.00,\n      bearing: 78.33\n    },\n    onChapterEnter: [],\n    onChapterExit: []\n  }, {\n    id: 'agassiz2015',\n    alignment: 'left',\n    title: 'Agassiz Glacier, 2015',\n    image: '',\n    description: 'Between 1998 and 2015, Agassiz Glacier lost 108 acres of surface area (about 37%).',\n    location: {\n      center: [-114.15881, 48.93439],\n      zoom: 13.51,\n      pitch: 41.00,\n      bearing: 78.33\n    },\n    onChapterEnter: [{\n      layer: 'gnpglaciers-2015',\n      opacity: 0.25\n    }],\n    onChapterExit: [{\n      layer: 'gnpglaciers-2015',\n      opacity: 0\n    }]\n  }, {\n    id: 'rainbow1998',\n    alignment: 'left',\n    title: 'Rainbow Glacier, 1998',\n    image: '',\n    description: 'Rainbow Glacier is in Glacier National Park in the U.S. state of Montana. The glacier is situated immediately to the east of Rainbow Peak at an elevation between 8,500 feet (2,600 m) and 8,000 feet (2,400 m) above sea level. The glacier has visible crevasses in satellite imagery. Rainbow Glacier has shown modest retreat compared to other glaciers in Glacier National Park.',\n    location: {\n      center: [-114.08659, 48.88039],\n      zoom: 13.09,\n      pitch: 50.00,\n      bearing: -53.60\n    },\n    onChapterEnter: [],\n    onChapterExit: []\n  }, {\n    id: 'rainbow2015',\n    alignment: 'left',\n    title: 'Rainbow Glacier, 2015',\n    image: '',\n    description: 'Between 1998 and 2015, Rainbow Glacier lost 17 acres of surface area (about 6%).',\n    location: {\n      center: [-114.08659, 48.88039],\n      zoom: 13.09,\n      pitch: 50.00,\n      bearing: -53.60\n    },\n    onChapterEnter: [{\n      layer: 'gnpglaciers-2015',\n      opacity: 0.25\n    }],\n    onChapterExit: [{\n      layer: 'gnpglaciers-2015',\n      opacity: 0\n    }]\n  }, {\n    id: 'kintla1998',\n    alignment: 'left',\n    title: 'Kintla Glacier, 1998',\n    image: '',\n    description: 'Kintla Glacier is in Glacier National Park in the U.S. state of Montana. The glacier is situated on a plateau 2 miles (3.2 km) southwest of Kintla Peak at an elevation between 8,700 feet (2,700 m) and 7,700 feet (2,300 m) above sea level. The glacier has numerous crevasses and is actually two glaciers.',\n    location: {\n      center: [-114.18755, 48.92880],\n      zoom: 13.09,\n      pitch: 48.50,\n      bearing: 164.00\n    },\n    onChapterEnter: [],\n    onChapterExit: []\n  }, {\n    id: 'kintla2015',\n    alignment: 'left',\n    title: 'Kintla Glacier, 2015',\n    image: '',\n    description: 'Between 1998 and 2015, Harrison Glacier lost 24 acres of surface area (about 10%).',\n    location: {\n      center: [-114.18755, 48.92880],\n      zoom: 13.09,\n      pitch: 48.50,\n      bearing: 164.00\n    },\n    onChapterEnter: [{\n      layer: 'gnpglaciers-2015',\n      opacity: 0.25\n    }],\n    onChapterExit: [{\n      layer: 'gnpglaciers-2015',\n      opacity: 0\n    }]\n  }, {\n    id: 'sperry1998',\n    alignment: 'left',\n    title: 'Sperry Glacier, 1998',\n    image: '',\n    description: 'Sperry Glacier is a glacier on the north slopes of Gunsight Mountain west of the Continental Divide in Glacier National Park in the U.S. state of Montana. Although many geologic features of Glacier National Park were formed during the much longer period of glaciation ending over 10,000 years ago, Sperry Glacier — like all the glaciers in the park today — is a product of the recent Little Ice Age, the period of cooler average temperatures starting in about the 13th century and concluding in the mid-19th century.',\n    location: {\n      center: [-113.75672, 48.62433],\n      zoom: 13.68,\n      pitch: 34.50,\n      bearing: 106.40\n    },\n    onChapterEnter: [],\n    onChapterExit: []\n  }, {\n    id: 'sperry2015',\n    alignment: 'left',\n    title: 'Sperry Glacier, 2015',\n    image: '',\n    description: 'Between 1998 and 2015, Harrison Glacier lost 37 acres of surface area (about 16%).',\n    location: {\n      center: [-113.75672, 48.62433],\n      zoom: 13.68,\n      pitch: 34.50,\n      bearing: 106.40\n    },\n    onChapterEnter: [{\n      layer: 'gnpglaciers-2015',\n      opacity: 0.25\n    }],\n    onChapterExit: [{\n      layer: 'gnpglaciers-2015',\n      opacity: 0\n    }]\n  }]\n};\n\nclass Map extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    var layerTypes = {\n      'fill': ['fill-opacity'],\n      'line': ['line-opacity'],\n      'circle': ['circle-opacity', 'circle-stroke-opacity'],\n      'symbol': ['icon-opacity', 'text-opacity'],\n      'raster': ['raster-opacity'],\n      'fill-extrusion': ['fill-extrusion-opacity'],\n      'heatmap': ['heatmap-opacity']\n    };\n    var alignments = {\n      'left': 'lefty',\n      'center': 'centered',\n      'right': 'righty',\n      'full': 'fully'\n    };\n\n    function getLayerPaintType(layer) {\n      var layerType = map.getLayer(layer).type;\n      return layerTypes[layerType];\n    }\n\n    function setLayerOpacity(layer) {\n      var paintProps = getLayerPaintType(layer.layer);\n      paintProps.forEach(function (prop) {\n        var options = {};\n\n        if (layer.duration) {\n          var transitionProp = prop + \"-transition\";\n          options = {\n            \"duration\": layer.duration\n          };\n          map.setPaintProperty(layer.layer, transitionProp, options);\n        }\n\n        map.setPaintProperty(layer.layer, prop, layer.opacity, options);\n      });\n    }\n\n    var story = document.getElementById('story');\n    var features = document.createElement('div');\n    features.setAttribute('id', 'features');\n    var header = document.createElement('div');\n\n    if (config.title) {\n      var titleText = document.createElement('h1');\n      titleText.innerText = config.title;\n      header.appendChild(titleText);\n    }\n\n    if (config.subtitle) {\n      var subtitleText = document.createElement('h2');\n      subtitleText.innerText = config.subtitle;\n      header.appendChild(subtitleText);\n    }\n\n    if (config.byline) {\n      var bylineText = document.createElement('p');\n      bylineText.innerText = config.byline;\n      header.appendChild(bylineText);\n    }\n\n    if (header.innerText.length > 0) {\n      header.classList.add(config.theme);\n      header.setAttribute('id', 'header');\n      story.appendChild(header);\n    }\n\n    config.chapters.forEach((record, idx) => {\n      var container = document.createElement('div');\n      var chapter = document.createElement('div');\n\n      if (record.title) {\n        var title = document.createElement('h3');\n        title.innerText = record.title;\n        chapter.appendChild(title);\n      }\n\n      if (record.image) {\n        var image = new Image();\n        image.src = record.image;\n        chapter.appendChild(image);\n      }\n\n      if (record.description) {\n        var story = document.createElement('p');\n        story.innerHTML = record.description;\n        chapter.appendChild(story);\n      }\n\n      container.setAttribute('id', record.id);\n      container.classList.add('step');\n\n      if (idx === 0) {\n        container.classList.add('active');\n      }\n\n      chapter.classList.add(config.theme);\n      container.appendChild(chapter);\n      container.classList.add(alignments[record.alignment] || 'centered');\n\n      if (record.hidden) {\n        container.classList.add('hidden');\n      }\n\n      features.appendChild(container);\n    });\n    story.appendChild(features);\n    var footer = document.createElement('div');\n\n    if (config.footer) {\n      var footerText = document.createElement('p');\n      footerText.innerHTML = config.footer;\n      footer.appendChild(footerText);\n    }\n\n    if (footer.innerText.length > 0) {\n      footer.classList.add(config.theme);\n      footer.setAttribute('id', 'footer');\n      story.appendChild(footer);\n    }\n\n    mapboxgl.accessToken = config.accessToken;\n\n    const transformRequest = url => {\n      const hasQuery = url.indexOf(\"?\") !== -1;\n      const suffix = hasQuery ? \"&pluginName=scrollytellingV2\" : \"?pluginName=scrollytellingV2\";\n      return {\n        url: url + suffix\n      };\n    };\n\n    var map = new mapboxgl.Map({\n      container: 'map',\n      style: config.style,\n      center: config.chapters[0].location.center,\n      zoom: config.chapters[0].location.zoom,\n      bearing: config.chapters[0].location.bearing,\n      pitch: config.chapters[0].location.pitch,\n      interactive: false,\n      transformRequest: transformRequest\n    });\n\n    if (config.showMarkers) {\n      var marker = new mapboxgl.Marker({\n        color: config.markerColor\n      });\n      marker.setLngLat(config.chapters[0].location.center).addTo(map);\n    } // instantiate the scrollama\n\n\n    var scroller = scrollama();\n    map.on(\"load\", function () {\n      if (config.use3dTerrain) {\n        map.addSource('mapbox-dem', {\n          'type': 'raster-dem',\n          'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',\n          'tileSize': 512,\n          'maxzoom': 14\n        }); // add the DEM source as a terrain layer with exaggerated height\n\n        map.setTerrain({\n          'source': 'mapbox-dem',\n          'exaggeration': 1.5\n        }); // add a sky layer that will show when the map is highly pitched\n\n        map.addLayer({\n          'id': 'sky',\n          'type': 'sky',\n          'paint': {\n            'sky-type': 'atmosphere',\n            'sky-atmosphere-sun': [0.0, 0.0],\n            'sky-atmosphere-sun-intensity': 15\n          }\n        });\n      }\n\n      ; // setup the instance, pass callback functions\n\n      scroller.setup({\n        step: '.step',\n        offset: 0.5,\n        progress: true\n      }).onStepEnter(response => {\n        var chapter = config.chapters.find(chap => chap.id === response.element.id);\n        response.element.classList.add('active');\n        map[chapter.mapAnimation || 'flyTo'](chapter.location);\n\n        if (config.showMarkers) {\n          marker.setLngLat(chapter.location.center);\n        }\n\n        if (chapter.onChapterEnter.length > 0) {\n          chapter.onChapterEnter.forEach(setLayerOpacity);\n        }\n\n        if (chapter.callback) {\n          window[chapter.callback]();\n        }\n\n        if (chapter.rotateAnimation) {\n          map.once('moveend', function () {\n            const rotateNumber = map.getBearing();\n            map.rotateTo(rotateNumber + 90, {\n              duration: 24000,\n              easing: function (t) {\n                return t;\n              }\n            });\n          });\n        }\n      }).onStepExit(response => {\n        var chapter = config.chapters.find(chap => chap.id === response.element.id);\n        response.element.classList.remove('active');\n\n        if (chapter.onChapterExit.length > 0) {\n          chapter.onChapterExit.forEach(setLayerOpacity);\n        }\n      });\n    }); // setup resize event\n\n    window.addEventListener('resize', scroller.resize);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"interactive-map\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"map\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 648,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"story\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 649,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 647,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass Articles extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    $(\".outer\").each((i, article) => {\n      var height = Math.max(0, Math.min(100, 100 * (article.getBoundingClientRect().top - window.innerHeight / 3) / window.innerHeight));\n      $(article).css(\"transform\", \"translateX(\" + -height + \"%)\");\n      $(article).find(\".inner\").css(\"transform\", \"translateX(\" + height + \"%)\");\n    });\n    $(\"#articles\").scroll(function () {\n      $(\".outer\").each((i, article) => {\n        var height = Math.max(0, Math.min(100, 100 * (article.getBoundingClientRect().top - window.innerHeight / 3) / window.innerHeight));\n        $(article).css(\"transform\", \"translateX(\" + -height + \"%)\");\n        $(article).find(\".inner\").css(\"transform\", \"translateX(\" + height + \"%)\");\n      });\n    });\n  }\n\n  renderArticle(i) {\n    var article = articles[i];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"article \" + article.tag,\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        target: \"_blank\",\n        href: article.url,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: article.logo,\n          alt: article.source\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 677,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        target: \"_blank\",\n        href: article.url,\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: article.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 680,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"article-content\",\n        children: [article.text, /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"outer\",\n          \"aria-hidden\": \"true\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inner\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: article.highlight\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 686,\n              columnNumber: 36\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 686,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 683,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 7\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"articles\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"gradient-top\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [this.renderArticle(0), this.renderArticle(1), this.renderArticle(2), this.renderArticle(3), this.renderArticle(4), this.renderArticle(5), this.renderArticle(6), this.renderArticle(7), this.renderArticle(8), this.renderArticle(9), this.renderArticle(10), this.renderArticle(11), this.renderArticle(12), this.renderArticle(13)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 696,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"whitespace\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 712,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"gradient-bottom\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 713,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 694,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass SceneThree extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"scene-three\",\n      children: [/*#__PURE__*/_jsxDEV(Map, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 726,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Articles, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 727,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 725,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default SceneThree;","map":{"version":3,"sources":["/Users/charles/Documents/GitHub/1/revolution-2019/src/components/prologue/SceneThree.js"],"names":["React","$","Tweet","scrollama","mapboxgl","economist","ft","npr","ny","nyt","aj","an","vox","gu","articles","title","source","url","tag","logo","text","highlight","config","style","accessToken","showMarkers","theme","use3dTerrain","subtitle","byline","footer","chapters","id","alignment","image","description","location","center","zoom","pitch","bearing","onChapterEnter","layer","opacity","onChapterExit","Map","Component","constructor","props","componentDidMount","layerTypes","alignments","getLayerPaintType","layerType","map","getLayer","type","setLayerOpacity","paintProps","forEach","prop","options","duration","transitionProp","setPaintProperty","story","document","getElementById","features","createElement","setAttribute","header","titleText","innerText","appendChild","subtitleText","bylineText","length","classList","add","record","idx","container","chapter","Image","src","innerHTML","hidden","footerText","transformRequest","hasQuery","indexOf","suffix","interactive","marker","Marker","color","markerColor","setLngLat","addTo","scroller","on","addSource","setTerrain","addLayer","setup","step","offset","progress","onStepEnter","response","find","chap","element","mapAnimation","callback","window","rotateAnimation","once","rotateNumber","getBearing","rotateTo","easing","t","onStepExit","remove","addEventListener","resize","render","Articles","each","i","article","height","Math","max","min","getBoundingClientRect","top","innerHeight","css","scroll","renderArticle","SceneThree"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport $ from \"jquery\";\nimport { Tweet } from 'react-twitter-widgets';\nimport scrollama from \"scrollama\";\nimport mapboxgl from \"mapbox-gl\";\nimport economist from \"../../media/prologue/logo-economist.png\";\nimport ft from \"../../media/prologue/logo-ft.png\";\nimport npr from \"../../media/prologue/logo-npr.png\";\nimport ny from \"../../media/prologue/logo-new-yorker.png\";\nimport nyt from \"../../media/prologue/logo-new-york-times.png\";\nimport aj from \"../../media/prologue/logo-aljazeera.png\";\nimport an from \"../../media/prologue/logo-annahar.png\";\nimport vox from \"../../media/prologue/logo-vox.png\";\nimport gu from \"../../media/prologue/logo-guardian.png\";\n\nconst articles = [{\n  title: \"Digital media fuel global protests but can be used against them\",\n  source: \"The Economist\",\n  url: \"https://www.economist.com/international/2021/01/16/digital-media-fuel-global-protests-but-can-be-used-against-them\",\n  tag: \"article-1\",\n  logo: economist,\n  text: \"Protesters in 2019 relied heavily on digital media for organisation, publicity and communication.\",\n  highlight: \"Protesters in 2019 relied heavily on digital media for organisation, publicity and communication.\"\n}, {\n  title: \"2019: the year of street protest\",\n  source: \"The Financial Times\",\n  url: \"https://www.ft.com/content/9f7e94c4-2563-11ea-9a4f-963f0ec7e134\",\n  tag: \"article-3\",\n  logo: ft,\n  text: \"Social media is a powerful organising tool everywhere — allowing protesters to crowdsource grievances, slogans and tactics.\",\n  highlight: \"Social media is a powerful organising tool everywhere — allowing protesters to crowdsource grievances, slogans and tactics.\"\n}, {\n  title: \"Lebanon's Government Is Accused Of Swarming WhatsApp To Catch Protesters\",\n  source: \"NPR\",\n  url: \"https://www.npr.org/2020/03/09/809684634/lebanons-government-is-accused-of-swarming-whatsapp-to-catch-protesters?t=1613410699449\",\n  tag: \"article-2\",\n  logo: npr,\n  text: \"They organized and shared updates on WhatsApp, streamed protests live on Twitter and highlighted police abuse on Instagram.\",\n  highlight: \"They organized and shared updates on WhatsApp, streamed protests live on Twitter and highlighted police abuse on Instagram.\"\n}, {\n  title: \"The Second Act of Social-Media Activism\",\n  source: \"The New Yorker\",\n  url: \"https://www.newyorker.com/culture/cultural-comment/the-second-act-of-social-media-activism\",\n  tag: \"article-1\",\n  logo: ny,\n  text: \"Protest guides, generated from years of on-the-ground activist experience, are readily shared over Twitter and Instagram, telling readers how to blur faces in photographs or aid in de-arrests.\",\n  highlight: \"Protest guides, generated from years of on-the-ground activist experience, are readily shared over Twitter and Instagram\"\n}, {\n  title: \"Leaderless rebellion: how social media enables global protests\",\n  source: \"The Financial Times\",\n  url: \"https://www.ft.com/content/19dc5dfe-f67b-11e9-a79c-bc9acae3b654\",\n  tag: \"article-3\",\n  logo: ft,\n  text: \"Social media also allows a movement in one place to take inspiration from news of revolts in another. The occupation of the airport in Barcelona last week was a tactic borrowed from Hong Kong. The Sudanese and Algerian uprisings this year borrowed each other’s imagery and slogans.\",\n  highlight: \"Social media also allows a movement in one place to take inspiration from news of revolts in another.\"\n}, {\n  title: \"The Story of 2019: Protests in Every Corner of the Globe\",\n  source: \"The New Yorker\",\n  url: \"https://www.newyorker.com/news/our-columnists/the-story-of-2019-protests-in-every-corner-of-the-globe\",\n  tag: \"article-1\",\n  logo: ny,\n  text: \"There may be a global contagion due to social media. Seeing protests in other places motivates people to be willing to go to the streets in their own countries.\",\n  highlight: \"There may be a global contagion due to social media.\"\n}, {\n  title: \"Why Protest Tactics Spread Like Memes\",\n  source: \"The New York Times\",\n  url: \"https://www.nytimes.com/2020/07/31/style/viral-protest-videos.html\",\n  tag: \"article-2\",\n  logo: nyt,\n  text: \"Activists from around the world do actively learn from each other and exchange tactical tips. Images of protest spread on social media reveal many other matching moments from opposite sides of the world.\",\n  highlight: \"Activists from around the world do actively learn from each other and exchange tactical tips.\"\n}, {\n  title: \"Colombia protests pile pressure on president and hamper reforms\",\n  source: \"The Financial Times\",\n  url: \"https://www.ft.com/content/a2d80d10-11ba-11ea-a225-db2f231cfeae\",\n  tag: \"article-3\",\n  logo: ft,\n  text: \"Demonstrators in Colombia have copied the tactics of protests sweeping other Latin American nations, organising via social media and beating pots and pans to press their demands.\",\n  highlight: \"Demonstrators in Colombia have copied the tactics of protests sweeping other Latin American nations\"\n}, {\n  title: \"Pots and pans ‘cacerolazo’ protests echo across Latin America\",\n  source: \"AlJazeera\",\n  url: \"https://www.aljazeera.com/news/2019/12/2/pots-and-pans-cacerolazo-protests-echo-across-latin-america\",\n  tag: \"article-2\",\n  logo: aj,\n  text: \"When 6pm struck in Colombia, the sound of banging pots and pans – the “cacerolazo” – echoed across the country like they have since the mass anti-government protest kicked off more than a week ago.\",\n  highlight: \"When 6pm struck in Colombia, the sound of banging pots and pans – the “cacerolazo” – echoed across the country\"\n}, {\n  title: \"A Cacophonous Revolution: When pans and pots become the voice of the protests\",\n  source: \"An-Nahar\",\n  url: \"https://www.annahar.com/english/article/1068283-a-cacophonous-revolution-when-pans-and-pots-become-the-voice-of-the-protests\",\n  tag: \"article-2\",\n  logo: an,\n  text: \"Cookware cacophony has been the spotlight of the Lebanese protests during the past few days, as protesters resorted to banging their pots and pans to denounce the country’s endemic corruption and escalating crisis.\",\n  highlight: \"Cookware cacophony has been the spotlight of the Lebanese protests during the past few days, as protesters resorted to banging their pots and pans\"\n}, {\n  title: \"Why protesters have been banging pots and pans outside their windows\",\n  source: \"Vox\",\n  url: \"https://www.vox.com/identities/2020/6/5/21279690/protest-george-floyd-cacerolazo-bang-pots\",\n  tag: \"article-1\",\n  logo: vox,\n  text: \"Protesters in Washington, DC, Philadelphia, and Los Angeles have all been spotted participating in cacerolazos over the past week.\",\n  highlight: \"Protesters in Washington, DC, Philadelphia, and Los Angeles have all been spotted participating in cacerolazos over the past week.\"\n}, {\n  title: \"Chile’s ‘A rapist in your path’ chant hits 200 cities\",\n  source: \"AlJazeera\",\n  url: \"https://www.aljazeera.com/news/2019/12/20/chiles-a-rapist-in-your-path-chant-hits-200-cities-map\",\n  tag: \"article-2\",\n  logo: aj,\n  text: \"From Santiago to Nairobi and Tijuana to Stockholm, women in hundreds of cities worldwide have executed a Chilean choreographed feminist performance protesting sexual assault, victim-blaming and state violence.\",\n  highlight: \"From Santiago to Nairobi and Tijuana to Stockholm, women in hundreds of cities worldwide have executed a Chilean choreographed feminist performance\"\n}, {\n  title: \"‘The rapist is you!’: why a Chilean protest chant is being sung around the world\",\n  source: \"The Guardian\",\n  url: \"https://www.theguardian.com/society/2020/feb/03/the-rapist-is-you-chilean-protest-song-chanted-around-the-world-un-iolador-en-tu-camino\",\n  tag: \"article-3\",\n  logo: gu,\n  text: \"Since November, Un Violador en Tu Camino has been sung everywhere from France and Mexico to Kenya and India as a protest against the systemic use of sexual violence to repress women.\",\n  highlight: \"Since November, Un Violador en Tu Camino has been sung everywhere from France and Mexico to Kenya and India\"\n}, {\n  title: \"The Story of 2019: Protests in Every Corner of the Globe\",\n  source: \"The New Yorker\",\n  url: \"https://www.newyorker.com/news/our-columnists/the-story-of-2019-protests-in-every-corner-of-the-globe\",\n  tag: \"article-1\",\n  logo: ny,\n  text: \"The protests of 2019 have been epochal, the fury real, and the underlying message profound for the future.\",\n  highlight: \"The protests of 2019 have been epochal, the fury real, and the underlying message profound for the future.\"\n}];\n\n\nvar config = {\n    style: 'mapbox://styles/branigan/cjz37rcb003ib1cr3s8rnkt2d',\n    accessToken: 'pk.eyJ1IjoibWJ4c29sdXRpb25zIiwiYSI6ImNrMm01aG9hdTBlZGwzbXQ1ZXVrNHNmejAifQ.QHQA0N6XPWddCXtvoODHZg',\n    showMarkers: false,\n    theme: 'dark',\n    use3dTerrain: true,\n    title: 'Glaciers of Glacier National Park',\n    subtitle: 'Change in coverage from 1998 to 2015',\n    byline: '',\n    footer: 'Source: Story text from Wikipedia, August 2019. Data from <a href=\"https://www.usgs.gov/centers/norock/science/retreat-glaciers-glacier-national-park\">USGS</a>',\n    chapters: [\n        {\n            id: 'glacier-np',\n            alignment: 'full',\n            title: 'Glacier National Park Glaciers',\n            image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/2015-06-19_Glacier_National_Park_%28U.S.%29_8633.jpg/800px-2015-06-19_Glacier_National_Park_%28U.S.%29_8633.jpg',\n            description: 'Glacier National Park is dominated by mountains which were carved into their present shapes by the huge glaciers of the last ice age. These glaciers have largely disappeared over the last 12,000 years. Evidence of widespread glacial action is found throughout the park in the form of U-shaped valleys, cirques, arêtes, and large outflow lakes radiating like fingers from the base of the highest peaks. Since the end of the ice ages, various warming and cooling trends have occurred. The last recent cooling trend was during the Little Ice Age, which took place approximately between 1550 and 1850. During the Little Ice Age, the glaciers in the park expanded and advanced, although to nowhere near as great an extent as they had during the Ice Age.',\n            location: {\n                center: [-113.91666, 48.66451],\n                zoom: 8,\n                pitch: 0.00,\n                bearing: 0.00\n            },\n            onChapterEnter: [\n                {\n                    layer: 'gnpglaciers-1998',\n                    opacity: 0.25\n                },\n                {\n                    layer: 'glaciernp-boundary',\n                    opacity: 0.25\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'glaciernp-boundary',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'harrison1998',\n            alignment: 'left',\n            title: 'Harrison Glacier, 1998',\n            image: '',\n            description: 'Harrison Glacier is located in the US state of Montana in Glacier National Park. Situated on a southeast facing ridge immediately south of Mount Jackson, Harrison Glacier is the largest glacier in Glacier National Park. Compared to many of the vanishing glaciers in Glacier National Park, Harrison Glacier has a much higher altitude accumulation zone (approximately 9,000 feet (2,700 m)) which has allowed it to maintain some equilibrium in its glacier mass balance.',\n            location: {\n                center: [-113.72917, 48.58938],\n                zoom: 12.92,\n                pitch: 39.50,\n                bearing: 36.00\n            },\n            onChapterEnter: [],\n            onChapterExit: [\n                // {\n                //     layer: 'gnpglaciers-2015',\n                //     opacity: 0\n                // }\n            ]\n        },\n        {\n            id: 'harrison2015',\n            alignment: 'left',\n            title: 'Harrison Glacier, 2015',\n            image: '',\n            description: 'Between 1998 and 2015, Harrison Glacier lost 169 acres of surface area (about 37%).',\n            location: {\n                center: [-113.72917, 48.58938],\n                zoom: 12.92,\n                pitch: 39.50,\n                bearing: 36.00\n            },\n            onChapterEnter: [\n                {\n                    layer: 'gnpglaciers-2015',\n                    opacity: 0.25\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'gnpglaciers-2015',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'blackfoot1998',\n            alignment: 'left',\n            title: 'Blackfoot Glacier, 1998',\n            image: '',\n            description: 'Blackfoot Glacier is the second largest of the remaining 25 glaciers in Glacier National Park, Montana. Blackfoot Glacier is just to the north of Blackfoot Mountain and near Jackson Glacier. When first documented in 1850, the glacier also included the now separate Jackson Glacier and together, they covered 1,875 acres (7.59 km2). In 1850, there were an estimated 150 glaciers in the park. Glaciologists have stated that by the year 2030, all the glaciers in the park may disappear.',\n            location: {\n                center: [-113.66573, 48.59181],\n                zoom: 12.92,\n                pitch: 51.50,\n                bearing: -26.40\n            },\n            onChapterEnter: [],\n            onChapterExit: []\n        },\n        {\n            id: 'blackfoot2015',\n            alignment: 'left',\n            title: 'Blackfoot Glacier, 2015',\n            image: '',\n            description: 'Between 1998 and 2015, Blackfoot Glacier lost 31 acres of surface area (about 8%).',\n            location: {\n                center: [-113.66573, 48.59181],\n                zoom: 12.92,\n                pitch: 51.50,\n                bearing: -26.40\n            },\n            onChapterEnter: [\n                {\n                    layer: 'gnpglaciers-2015',\n                    opacity: 0.25\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'gnpglaciers-2015',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'agassiz1998',\n            alignment: 'left',\n            title: 'Agassiz Glacier, 1998',\n            image: '',\n            description: 'Agassiz Glacier is in Glacier National Park in the U.S. state of Montana. It is named after Louis Agassiz, a Swiss-American glaciologist. The glacier is situated in a cirque to the southeast of Kintla Peak west of the Continental Divide. Agassiz Glacier is one of several glaciers that have been selected for monitoring by the U.S. Geological Survey\\'s Glacier Monitoring Research program, which is researching changes to the mass balance of glaciers in and surrounding Glacier National Park.',\n            location: {\n                center: [-114.15881, 48.93439],\n                zoom: 13.51,\n                pitch: 41.00,\n                bearing: 78.33\n            },\n            onChapterEnter: [],\n            onChapterExit: []\n        },\n        {\n            id: 'agassiz2015',\n            alignment: 'left',\n            title: 'Agassiz Glacier, 2015',\n            image: '',\n            description: 'Between 1998 and 2015, Agassiz Glacier lost 108 acres of surface area (about 37%).',\n            location: {\n                center: [-114.15881, 48.93439],\n                zoom: 13.51,\n                pitch: 41.00,\n                bearing: 78.33\n            },\n            onChapterEnter: [\n                {\n                    layer: 'gnpglaciers-2015',\n                    opacity: 0.25,\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'gnpglaciers-2015',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'rainbow1998',\n            alignment: 'left',\n            title: 'Rainbow Glacier, 1998',\n            image: '',\n            description: 'Rainbow Glacier is in Glacier National Park in the U.S. state of Montana. The glacier is situated immediately to the east of Rainbow Peak at an elevation between 8,500 feet (2,600 m) and 8,000 feet (2,400 m) above sea level. The glacier has visible crevasses in satellite imagery. Rainbow Glacier has shown modest retreat compared to other glaciers in Glacier National Park.',\n            location: {\n                center: [-114.08659, 48.88039],\n                zoom: 13.09,\n                pitch: 50.00,\n                bearing: -53.60\n            },\n            onChapterEnter: [],\n            onChapterExit: []\n        },\n        {\n            id: 'rainbow2015',\n            alignment: 'left',\n            title: 'Rainbow Glacier, 2015',\n            image: '',\n            description: 'Between 1998 and 2015, Rainbow Glacier lost 17 acres of surface area (about 6%).',\n            location: {\n                center: [-114.08659, 48.88039],\n                zoom: 13.09,\n                pitch: 50.00,\n                bearing: -53.60\n            },\n            onChapterEnter: [\n                {\n                    layer: 'gnpglaciers-2015',\n                    opacity: 0.25\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'gnpglaciers-2015',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'kintla1998',\n            alignment: 'left',\n            title: 'Kintla Glacier, 1998',\n            image: '',\n            description: 'Kintla Glacier is in Glacier National Park in the U.S. state of Montana. The glacier is situated on a plateau 2 miles (3.2 km) southwest of Kintla Peak at an elevation between 8,700 feet (2,700 m) and 7,700 feet (2,300 m) above sea level. The glacier has numerous crevasses and is actually two glaciers.',\n            location: {\n                center: [-114.18755, 48.92880],\n                zoom: 13.09,\n                pitch: 48.50,\n                bearing: 164.00\n            },\n            onChapterEnter: [],\n            onChapterExit: []\n        },\n        {\n            id: 'kintla2015',\n            alignment: 'left',\n            title: 'Kintla Glacier, 2015',\n            image: '',\n            description: 'Between 1998 and 2015, Harrison Glacier lost 24 acres of surface area (about 10%).',\n            location: {\n                center: [-114.18755, 48.92880],\n                zoom: 13.09,\n                pitch: 48.50,\n                bearing: 164.00\n            },\n            onChapterEnter: [\n                {\n                    layer: 'gnpglaciers-2015',\n                    opacity: 0.25\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'gnpglaciers-2015',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'sperry1998',\n            alignment: 'left',\n            title: 'Sperry Glacier, 1998',\n            image: '',\n            description: 'Sperry Glacier is a glacier on the north slopes of Gunsight Mountain west of the Continental Divide in Glacier National Park in the U.S. state of Montana. Although many geologic features of Glacier National Park were formed during the much longer period of glaciation ending over 10,000 years ago, Sperry Glacier — like all the glaciers in the park today — is a product of the recent Little Ice Age, the period of cooler average temperatures starting in about the 13th century and concluding in the mid-19th century.',\n            location: {\n                center: [-113.75672, 48.62433],\n                zoom: 13.68,\n                pitch: 34.50,\n                bearing: 106.40\n            },\n            onChapterEnter: [],\n            onChapterExit: []\n        },\n        {\n            id: 'sperry2015',\n            alignment: 'left',\n            title: 'Sperry Glacier, 2015',\n            image: '',\n            description: 'Between 1998 and 2015, Harrison Glacier lost 37 acres of surface area (about 16%).',\n            location: {\n                center: [-113.75672, 48.62433],\n                zoom: 13.68,\n                pitch: 34.50,\n                bearing: 106.40\n            },\n            onChapterEnter: [\n                {\n                    layer: 'gnpglaciers-2015',\n                    opacity: 0.25\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'gnpglaciers-2015',\n                    opacity: 0\n                }\n            ]\n         }\n    ]\n};\n\n\n\n\n\n\n\n\nclass Map extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    var layerTypes = {\n        'fill': ['fill-opacity'],\n        'line': ['line-opacity'],\n        'circle': ['circle-opacity', 'circle-stroke-opacity'],\n        'symbol': ['icon-opacity', 'text-opacity'],\n        'raster': ['raster-opacity'],\n        'fill-extrusion': ['fill-extrusion-opacity'],\n        'heatmap': ['heatmap-opacity']\n    }\n\n    var alignments = {\n        'left': 'lefty',\n        'center': 'centered',\n        'right': 'righty',\n        'full': 'fully'\n    }\n\n    function getLayerPaintType(layer) {\n        var layerType = map.getLayer(layer).type;\n        return layerTypes[layerType];\n    }\n\n    function setLayerOpacity(layer) {\n        var paintProps = getLayerPaintType(layer.layer);\n        paintProps.forEach(function(prop) {\n            var options = {};\n            if (layer.duration) {\n                var transitionProp = prop + \"-transition\";\n                options = { \"duration\": layer.duration };\n                map.setPaintProperty(layer.layer, transitionProp, options);\n            }\n            map.setPaintProperty(layer.layer, prop, layer.opacity, options);\n        });\n    }\n\n    var story = document.getElementById('story');\n    var features = document.createElement('div');\n    features.setAttribute('id', 'features');\n\n    var header = document.createElement('div');\n\n    if (config.title) {\n        var titleText = document.createElement('h1');\n        titleText.innerText = config.title;\n        header.appendChild(titleText);\n    }\n\n    if (config.subtitle) {\n        var subtitleText = document.createElement('h2');\n        subtitleText.innerText = config.subtitle;\n        header.appendChild(subtitleText);\n    }\n\n    if (config.byline) {\n        var bylineText = document.createElement('p');\n        bylineText.innerText = config.byline;\n        header.appendChild(bylineText);\n    }\n\n    if (header.innerText.length > 0) {\n        header.classList.add(config.theme);\n        header.setAttribute('id', 'header');\n        story.appendChild(header);\n    }\n\n    config.chapters.forEach((record, idx) => {\n        var container = document.createElement('div');\n        var chapter = document.createElement('div');\n\n        if (record.title) {\n            var title = document.createElement('h3');\n            title.innerText = record.title;\n            chapter.appendChild(title);\n        }\n\n        if (record.image) {\n            var image = new Image();\n            image.src = record.image;\n            chapter.appendChild(image);\n        }\n\n        if (record.description) {\n            var story = document.createElement('p');\n            story.innerHTML = record.description;\n            chapter.appendChild(story);\n        }\n\n        container.setAttribute('id', record.id);\n        container.classList.add('step');\n        if (idx === 0) {\n            container.classList.add('active');\n        }\n\n        chapter.classList.add(config.theme);\n        container.appendChild(chapter);\n        container.classList.add(alignments[record.alignment] || 'centered');\n        if (record.hidden) {\n            container.classList.add('hidden');\n        }\n        features.appendChild(container);\n    });\n\n    story.appendChild(features);\n\n    var footer = document.createElement('div');\n\n    if (config.footer) {\n        var footerText = document.createElement('p');\n        footerText.innerHTML = config.footer;\n        footer.appendChild(footerText);\n    }\n\n    if (footer.innerText.length > 0) {\n        footer.classList.add(config.theme);\n        footer.setAttribute('id', 'footer');\n        story.appendChild(footer);\n    }\n\n    mapboxgl.accessToken = config.accessToken;\n\n    const transformRequest = (url) => {\n        const hasQuery = url.indexOf(\"?\") !== -1;\n        const suffix = hasQuery ? \"&pluginName=scrollytellingV2\" : \"?pluginName=scrollytellingV2\";\n        return {\n          url: url + suffix\n        }\n    }\n\n    var map = new mapboxgl.Map({\n        container: 'map',\n        style: config.style,\n        center: config.chapters[0].location.center,\n        zoom: config.chapters[0].location.zoom,\n        bearing: config.chapters[0].location.bearing,\n        pitch: config.chapters[0].location.pitch,\n        interactive: false,\n        transformRequest: transformRequest\n    });\n\n    if (config.showMarkers) {\n        var marker = new mapboxgl.Marker({ color: config.markerColor });\n        marker.setLngLat(config.chapters[0].location.center).addTo(map);\n    }\n\n    // instantiate the scrollama\n    var scroller = scrollama();\n\n    map.on(\"load\", function() {\n        if (config.use3dTerrain) {\n            map.addSource('mapbox-dem', {\n                'type': 'raster-dem',\n                'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',\n                'tileSize': 512,\n                'maxzoom': 14\n            });\n            // add the DEM source as a terrain layer with exaggerated height\n            map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.5 });\n\n            // add a sky layer that will show when the map is highly pitched\n            map.addLayer({\n                'id': 'sky',\n                'type': 'sky',\n                'paint': {\n                    'sky-type': 'atmosphere',\n                    'sky-atmosphere-sun': [0.0, 0.0],\n                    'sky-atmosphere-sun-intensity': 15\n                }\n            });\n        };\n\n        // setup the instance, pass callback functions\n        scroller\n        .setup({\n            step: '.step',\n            offset: 0.5,\n            progress: true\n        })\n        .onStepEnter(response => {\n            var chapter = config.chapters.find(chap => chap.id === response.element.id);\n            response.element.classList.add('active');\n            map[chapter.mapAnimation || 'flyTo'](chapter.location);\n\n            if (config.showMarkers) {\n                marker.setLngLat(chapter.location.center);\n            }\n            if (chapter.onChapterEnter.length > 0) {\n                chapter.onChapterEnter.forEach(setLayerOpacity);\n            }\n            if (chapter.callback) {\n                window[chapter.callback]();\n            }\n            if (chapter.rotateAnimation) {\n                map.once('moveend', function() {\n                    const rotateNumber = map.getBearing();\n                    map.rotateTo(rotateNumber + 90, {\n                        duration: 24000, easing: function (t) {\n                            return t;\n                        }\n                    });\n                });\n            }\n        })\n        .onStepExit(response => {\n            var chapter = config.chapters.find(chap => chap.id === response.element.id);\n            response.element.classList.remove('active');\n            if (chapter.onChapterExit.length > 0) {\n                chapter.onChapterExit.forEach(setLayerOpacity);\n            }\n        });\n    });\n\n    // setup resize event\n    window.addEventListener('resize', scroller.resize);\n  }\n  render() {\n    return (\n      <div id=\"interactive-map\">\n        <div id=\"map\"></div>\n        <div id=\"story\"></div>\n      </div>\n    );\n  }\n}\n\nclass Articles extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    $(\".outer\").each((i, article) => {\n      var height = Math.max(0, Math.min(100, 100 * (article.getBoundingClientRect().top - (window.innerHeight / 3)) / window.innerHeight));\n      $(article).css(\"transform\", \"translateX(\" + -height + \"%)\");\n      $(article).find(\".inner\").css(\"transform\", \"translateX(\" + height + \"%)\");\n    });\n    $(\"#articles\").scroll(function() {\n      $(\".outer\").each((i, article) => {\n        var height = Math.max(0, Math.min(100, 100 * (article.getBoundingClientRect().top - (window.innerHeight / 3)) / window.innerHeight));\n        $(article).css(\"transform\", \"translateX(\" + -height + \"%)\");\n        $(article).find(\".inner\").css(\"transform\", \"translateX(\" + height + \"%)\");\n      });\n    });\n  }\n  renderArticle(i) {\n    var article = articles[i];\n    return (\n      <div className={\"article \" + article.tag}>\n        <a target=\"_blank\" href={article.url}>\n          <img src={article.logo} alt={article.source} />\n        </a>\n        <a target=\"_blank\" href={article.url}>\n          <h1>{article.title}</h1>\n        </a>\n        <div className=\"article-content\">\n          {article.text}\n          <span className=\"outer\" aria-hidden=\"true\">\n            <div className=\"inner\"><span>{article.highlight}</span></div>\n          </span>\n        </div>\n      </div>\n    );\n  }\n  render() {\n    return (\n      <div id=\"articles\">\n        <div id=\"gradient-top\"></div>\n        <div>\n          {this.renderArticle(0)}\n          {this.renderArticle(1)}\n          {this.renderArticle(2)}\n          {this.renderArticle(3)}\n          {this.renderArticle(4)}\n          {this.renderArticle(5)}\n          {this.renderArticle(6)}\n          {this.renderArticle(7)}\n          {this.renderArticle(8)}\n          {this.renderArticle(9)}\n          {this.renderArticle(10)}\n          {this.renderArticle(11)}\n          {this.renderArticle(12)}\n          {this.renderArticle(13)}\n        </div>\n        <div id=\"whitespace\"></div>\n        <div id=\"gradient-bottom\"></div>\n      </div>\n    );\n  }\n}\n\nclass SceneThree extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n  render() {\n    return (\n      <div id=\"scene-three\">\n        <Map />\n        <Articles />\n      </div>\n    );\n  }\n}\n\nexport default SceneThree;\n"]},"metadata":{},"sourceType":"module"}