{"ast":null,"code":"var _jsxFileName = \"/Users/charles/Documents/GitHub/1/revolution-2019/src/components/prologue/SceneThree.js\";\nimport React from \"react\";\nimport ReactDOM from 'react-dom';\nimport $ from \"jquery\";\nimport { Tweet } from 'react-twitter-widgets';\nimport scrollama from \"scrollama\";\nimport mapboxgl from \"mapbox-gl\";\nimport economist from \"../../media/prologue/logo-economist.png\";\nimport ft from \"../../media/prologue/logo-ft.png\";\nimport npr from \"../../media/prologue/logo-npr.png\";\nimport ny from \"../../media/prologue/logo-new-yorker.png\";\nimport nyt from \"../../media/prologue/logo-new-york-times.png\";\nimport aj from \"../../media/prologue/logo-aljazeera.png\";\nimport an from \"../../media/prologue/logo-annahar.png\";\nimport vox from \"../../media/prologue/logo-vox.png\";\nimport gu from \"../../media/prologue/logo-guardian.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst articles = [{\n  title: \"Digital media fuel global protests but can be used against them\",\n  source: \"The Economist\",\n  url: \"https://www.economist.com/international/2021/01/16/digital-media-fuel-global-protests-but-can-be-used-against-them\",\n  tag: \"article-1\",\n  logo: economist,\n  text: \"Protesters in 2019 relied heavily on digital media for organisation, publicity and communication.\",\n  highlight: \"Protesters in 2019 relied heavily on digital media for organisation, publicity and communication.\"\n}, {\n  title: \"2019: the year of street protest\",\n  source: \"The Financial Times\",\n  url: \"https://www.ft.com/content/9f7e94c4-2563-11ea-9a4f-963f0ec7e134\",\n  tag: \"article-3\",\n  logo: ft,\n  text: \"Social media is a powerful organising tool everywhere — allowing protesters to crowdsource grievances, slogans and tactics.\",\n  highlight: \"Social media is a powerful organising tool everywhere — allowing protesters to crowdsource grievances, slogans and tactics.\"\n}, {\n  title: \"Lebanon's Government Is Accused Of Swarming WhatsApp To Catch Protesters\",\n  source: \"NPR\",\n  url: \"https://www.npr.org/2020/03/09/809684634/lebanons-government-is-accused-of-swarming-whatsapp-to-catch-protesters?t=1613410699449\",\n  tag: \"article-2\",\n  logo: npr,\n  text: \"They organized and shared updates on WhatsApp, streamed protests live on Twitter and highlighted police abuse on Instagram.\",\n  highlight: \"They organized and shared updates on WhatsApp, streamed protests live on Twitter and highlighted police abuse on Instagram.\"\n}, {\n  title: \"The Second Act of Social-Media Activism\",\n  source: \"The New Yorker\",\n  url: \"https://www.newyorker.com/culture/cultural-comment/the-second-act-of-social-media-activism\",\n  tag: \"article-1\",\n  logo: ny,\n  text: \"Protest guides, generated from years of on-the-ground activist experience, are readily shared over Twitter and Instagram, telling readers how to blur faces in photographs or aid in de-arrests.\",\n  highlight: \"Protest guides, generated from years of on-the-ground activist experience, are readily shared over Twitter and Instagram\"\n}, {\n  title: \"Leaderless rebellion: how social media enables global protests\",\n  source: \"The Financial Times\",\n  url: \"https://www.ft.com/content/19dc5dfe-f67b-11e9-a79c-bc9acae3b654\",\n  tag: \"article-3\",\n  logo: ft,\n  text: \"Social media also allows a movement in one place to take inspiration from news of revolts in another. The occupation of the airport in Barcelona last week was a tactic borrowed from Hong Kong. The Sudanese and Algerian uprisings this year borrowed each other’s imagery and slogans.\",\n  highlight: \"Social media also allows a movement in one place to take inspiration from news of revolts in another.\"\n}, {\n  title: \"The Story of 2019: Protests in Every Corner of the Globe\",\n  source: \"The New Yorker\",\n  url: \"https://www.newyorker.com/news/our-columnists/the-story-of-2019-protests-in-every-corner-of-the-globe\",\n  tag: \"article-1\",\n  logo: ny,\n  text: \"There may be a global contagion due to social media. Seeing protests in other places motivates people to be willing to go to the streets in their own countries.\",\n  highlight: \"There may be a global contagion due to social media.\"\n}, {\n  title: \"Why Protest Tactics Spread Like Memes\",\n  source: \"The New York Times\",\n  url: \"https://www.nytimes.com/2020/07/31/style/viral-protest-videos.html\",\n  tag: \"article-2\",\n  logo: nyt,\n  text: \"Activists from around the world do actively learn from each other and exchange tactical tips. Images of protest spread on social media reveal many other matching moments from opposite sides of the world.\",\n  highlight: \"Activists from around the world do actively learn from each other and exchange tactical tips.\"\n}, {\n  title: \"Colombia protests pile pressure on president and hamper reforms\",\n  source: \"The Financial Times\",\n  url: \"https://www.ft.com/content/a2d80d10-11ba-11ea-a225-db2f231cfeae\",\n  tag: \"article-3\",\n  logo: ft,\n  text: \"Demonstrators in Colombia have copied the tactics of protests sweeping other Latin American nations, organising via social media and beating pots and pans to press their demands.\",\n  highlight: \"Demonstrators in Colombia have copied the tactics of protests sweeping other Latin American nations\"\n}, {\n  title: \"Pots and pans ‘cacerolazo’ protests echo across Latin America\",\n  source: \"AlJazeera\",\n  url: \"https://www.aljazeera.com/news/2019/12/2/pots-and-pans-cacerolazo-protests-echo-across-latin-america\",\n  tag: \"article-2\",\n  logo: aj,\n  text: \"When 6pm struck in Colombia, the sound of banging pots and pans – the “cacerolazo” – echoed across the country like they have since the mass anti-government protest kicked off more than a week ago.\",\n  highlight: \"When 6pm struck in Colombia, the sound of banging pots and pans – the “cacerolazo” – echoed across the country\"\n}, {\n  title: \"A Cacophonous Revolution: When pans and pots become the voice of the protests\",\n  source: \"An-Nahar\",\n  url: \"https://www.annahar.com/english/article/1068283-a-cacophonous-revolution-when-pans-and-pots-become-the-voice-of-the-protests\",\n  tag: \"article-2\",\n  logo: an,\n  text: \"Cookware cacophony has been the spotlight of the Lebanese protests during the past few days, as protesters resorted to banging their pots and pans to denounce the country’s endemic corruption and escalating crisis.\",\n  highlight: \"Cookware cacophony has been the spotlight of the Lebanese protests during the past few days, as protesters resorted to banging their pots and pans\"\n}, {\n  title: \"Why protesters have been banging pots and pans outside their windows\",\n  source: \"Vox\",\n  url: \"https://www.vox.com/identities/2020/6/5/21279690/protest-george-floyd-cacerolazo-bang-pots\",\n  tag: \"article-1\",\n  logo: vox,\n  text: \"Protesters in Washington, DC, Philadelphia, and Los Angeles have all been spotted participating in cacerolazos over the past week.\",\n  highlight: \"Protesters in Washington, DC, Philadelphia, and Los Angeles have all been spotted participating in cacerolazos over the past week.\"\n}, {\n  title: \"Chile’s ‘A rapist in your path’ chant hits 200 cities\",\n  source: \"AlJazeera\",\n  url: \"https://www.aljazeera.com/news/2019/12/20/chiles-a-rapist-in-your-path-chant-hits-200-cities-map\",\n  tag: \"article-2\",\n  logo: aj,\n  text: \"From Santiago to Nairobi and Tijuana to Stockholm, women in hundreds of cities worldwide have executed a Chilean choreographed feminist performance protesting sexual assault, victim-blaming and state violence.\",\n  highlight: \"From Santiago to Nairobi and Tijuana to Stockholm, women in hundreds of cities worldwide have executed a Chilean choreographed feminist performance\"\n}, {\n  title: \"‘The rapist is you!’: why a Chilean protest chant is being sung around the world\",\n  source: \"The Guardian\",\n  url: \"https://www.theguardian.com/society/2020/feb/03/the-rapist-is-you-chilean-protest-song-chanted-around-the-world-un-iolador-en-tu-camino\",\n  tag: \"article-3\",\n  logo: gu,\n  text: \"Since November, Un Violador en Tu Camino has been sung everywhere from France and Mexico to Kenya and India as a protest against the systemic use of sexual violence to repress women.\",\n  highlight: \"Since November, Un Violador en Tu Camino has been sung everywhere from France and Mexico to Kenya and India\"\n}, {\n  title: \"The Story of 2019: Protests in Every Corner of the Globe\",\n  source: \"The New Yorker\",\n  url: \"https://www.newyorker.com/news/our-columnists/the-story-of-2019-protests-in-every-corner-of-the-globe\",\n  tag: \"article-1\",\n  logo: ny,\n  text: \"The protests of 2019 have been epochal, the fury real, and the underlying message profound for the future.\",\n  highlight: \"The protests of 2019 have been epochal, the fury real, and the underlying message profound for the future.\"\n}];\nvar config = {\n  style: 'mapbox://styles/charlesingea/ckkwgll2a4zb417n42kaelwja',\n  accessToken: 'pk.eyJ1IjoiY2hhcmxlc2luZ2VhIiwiYSI6ImNqcWpuc3lxcTBpcjc0M290YjRxbnJ1ZngifQ.wGSPWvAan_QiZsy2L4uoyg',\n  showMarkers: true,\n  theme: 'light',\n  chapters: [{\n    id: 'usa-1',\n    alignment: 'left',\n    hidden: true,\n    tweetId: '1266504172494520325',\n    location: {\n      center: [-93.26223, 44.98240],\n      zoom: 9,\n      pitch: 0.00,\n      bearing: 0.00\n    }\n  }, {\n    id: 'lebanon-1',\n    alignment: 'left',\n    hidden: true,\n    tweetId: '1185513821189869571',\n    location: {\n      center: [35.50461, 33.88607],\n      zoom: 9,\n      pitch: 0.00,\n      bearing: 0.00\n    }\n  }, {\n    id: 'wiss',\n    alignment: 'left',\n    hidden: true,\n    title: 'Wissahickon Park Trails',\n    image: '',\n    description: 'This steep, rocky gorge can be surprisingly technical. Follow the orange and yellow trails to repeatedly climb and descend through the schist hillsides (careful of the cliffs), or stick to the gravel Forbidden Drive for a relaxing ride along the creek. You\\'ll forget you\\'re in a city.',\n    location: {\n      center: [-75.21223, 40.05028],\n      zoom: 13.08,\n      pitch: 47.50,\n      bearing: 32.80\n    },\n    onChapterEnter: [{\n      layer: 'wissahickon',\n      opacity: 1\n    }],\n    onChapterExit: [{\n      layer: 'wissahickon',\n      opacity: 0\n    }]\n  }, {\n    id: 'pennypack',\n    alignment: 'left',\n    hidden: true,\n    title: 'Pennypack Park Trails',\n    image: '',\n    description: 'Pennypack is a great introduction trail system. Not too steep and not too technical, the beautiful wooded park also provides a great escape from urban life. The south side trails are originally bridle trails, so be nice to equestrians and dismount when you approach them.',\n    location: {\n      center: [-75.05685, 40.06839],\n      zoom: 13.73,\n      pitch: 43.50,\n      bearing: 96.80\n    },\n    onChapterEnter: [{\n      layer: 'pennypack',\n      opacity: 1\n    }],\n    onChapterExit: [{\n      layer: 'pennypack',\n      opacity: 0\n    }]\n  }]\n};\n\nclass Map extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    var layerTypes = {\n      'fill': ['fill-opacity'],\n      'line': ['line-opacity'],\n      'circle': ['circle-opacity', 'circle-stroke-opacity'],\n      'symbol': ['icon-opacity', 'text-opacity'],\n      'raster': ['raster-opacity'],\n      'fill-extrusion': ['fill-extrusion-opacity'],\n      'heatmap': ['heatmap-opacity']\n    };\n    var alignments = {\n      'left': 'lefty',\n      'center': 'centered',\n      'right': 'righty',\n      'full': 'fully'\n    };\n    var story = document.getElementById('story');\n    var features = document.createElement('div');\n    features.setAttribute('id', 'features');\n    var header = document.createElement('div');\n\n    if (config.title) {\n      var titleText = document.createElement('h1');\n      titleText.innerText = config.title;\n      header.appendChild(titleText);\n    }\n\n    if (config.subtitle) {\n      var subtitleText = document.createElement('h2');\n      subtitleText.innerText = config.subtitle;\n      header.appendChild(subtitleText);\n    }\n\n    if (config.byline) {\n      var bylineText = document.createElement('p');\n      bylineText.innerText = config.byline;\n      header.appendChild(bylineText);\n    }\n\n    if (header.innerText.length > 0) {\n      header.classList.add(config.theme);\n      header.setAttribute('id', 'header');\n      story.appendChild(header);\n    }\n\n    config.chapters.forEach((record, idx) => {\n      var container = document.createElement('div');\n      var chapter = document.createElement('div');\n\n      if (record.title) {\n        var title = document.createElement('h3');\n        title.innerText = record.title;\n        chapter.appendChild(title);\n      }\n\n      if (record.image) {\n        var image = new Image();\n        image.src = record.image;\n        chapter.appendChild(image);\n      }\n\n      if (record.description) {\n        var story = document.createElement('p');\n        story.innerHTML = record.description;\n        chapter.appendChild(story);\n      }\n\n      container.setAttribute('id', record.id);\n      container.classList.add('step');\n\n      if (idx === 0) {\n        container.classList.add('active');\n      }\n\n      chapter.classList.add(config.theme);\n      container.appendChild(chapter);\n      container.classList.add(alignments[record.alignment] || 'centered');\n\n      if (record.hidden) {\n        container.classList.add('hidden');\n      }\n\n      features.appendChild(container);\n    });\n    story.appendChild(features);\n    var footer = document.createElement('div');\n\n    if (config.footer) {\n      var footerText = document.createElement('p');\n      footerText.innerHTML = config.footer;\n      footer.appendChild(footerText);\n    }\n\n    if (footer.innerText.length > 0) {\n      footer.classList.add(config.theme);\n      footer.setAttribute('id', 'footer');\n      story.appendChild(footer);\n    }\n\n    mapboxgl.accessToken = config.accessToken;\n\n    const transformRequest = url => {\n      const hasQuery = url.indexOf(\"?\") !== -1;\n      const suffix = hasQuery ? \"&pluginName=scrollytellingV2\" : \"?pluginName=scrollytellingV2\";\n      return {\n        url: url + suffix\n      };\n    };\n\n    var map = new mapboxgl.Map({\n      container: 'map',\n      style: config.style,\n      center: config.chapters[0].location.center,\n      zoom: config.chapters[0].location.zoom,\n      bearing: config.chapters[0].location.bearing,\n      pitch: config.chapters[0].location.pitch,\n      interactive: false,\n      transformRequest: transformRequest\n    });\n\n    if (config.showMarkers) {\n      var tweetContainer = document.createElement(\"div\");\n\n      var tweet = /*#__PURE__*/_jsxDEV(Tweet, {\n        tweetId: config.chapters[0].tweetId,\n        options: {\n          theme: \"dark\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 19\n      }, this);\n\n      ReactDOM.render(tweet, tweetContainer);\n      var popup = new mapboxgl.Popup({\n        offset: [0, -350],\n        focusAfterOpen: false,\n        closeButton: false,\n        closeOnClick: false\n      }).setDOMContent(tweetContainer);\n      popup.setLngLat(config.chapters[0].location.center).addTo(map);\n      popup.addClassName(\"tweet-popup\");\n    } // instantiate the scrollama\n\n\n    var scroller = scrollama();\n    map.on(\"load\", function () {\n      if (config.use3dTerrain) {\n        map.addSource('mapbox-dem', {\n          'type': 'raster-dem',\n          'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',\n          'tileSize': 512,\n          'maxzoom': 14\n        }); // add the DEM source as a terrain layer with exaggerated height\n\n        map.setTerrain({\n          'source': 'mapbox-dem',\n          'exaggeration': 1.5\n        }); // add a sky layer that will show when the map is highly pitched\n\n        map.addLayer({\n          'id': 'sky',\n          'type': 'sky',\n          'paint': {\n            'sky-type': 'atmosphere',\n            'sky-atmosphere-sun': [0.0, 0.0],\n            'sky-atmosphere-sun-intensity': 15\n          }\n        });\n      }\n\n      ; // setup the instance, pass callback functions\n\n      scroller.setup({\n        step: '.step',\n        offset: 0.5,\n        progress: true\n      }).onStepEnter(response => {\n        var chapter = config.chapters.find(chap => chap.id === response.element.id);\n        response.element.classList.add('active');\n        map[chapter.mapAnimation || 'flyTo'](chapter.location);\n\n        if (config.showMarkers) {\n          popup.setLngLat(chapter.location.center);\n        }\n\n        if (chapter.callback) {\n          window[chapter.callback]();\n        }\n\n        if (chapter.rotateAnimation) {\n          map.once('moveend', function () {\n            const rotateNumber = map.getBearing();\n            map.rotateTo(rotateNumber + 90, {\n              duration: 24000,\n              easing: function (t) {\n                return t;\n              }\n            });\n          });\n        }\n      }).onStepExit(response => {\n        var chapter = config.chapters.find(chap => chap.id === response.element.id);\n        response.element.classList.remove('active');\n      });\n    }); // setup resize event\n\n    window.addEventListener('resize', scroller.resize);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"interactive-map\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"map\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"story\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass Articles extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    $(\".outer\").each((i, article) => {\n      var height = Math.max(0, Math.min(100, 100 * (article.getBoundingClientRect().top - window.innerHeight / 3) / window.innerHeight));\n      $(article).css(\"transform\", \"translateX(\" + -height + \"%)\");\n      $(article).find(\".inner\").css(\"transform\", \"translateX(\" + height + \"%)\");\n    });\n    $(\"#articles\").scroll(function () {\n      $(\".outer\").each((i, article) => {\n        var height = Math.max(0, Math.min(100, 100 * (article.getBoundingClientRect().top - window.innerHeight / 3) / window.innerHeight));\n        $(article).css(\"transform\", \"translateX(\" + -height + \"%)\");\n        $(article).find(\".inner\").css(\"transform\", \"translateX(\" + height + \"%)\");\n      });\n    });\n  }\n\n  renderArticle(i) {\n    var article = articles[i];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"article \" + article.tag,\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        target: \"_blank\",\n        href: article.url,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: article.logo,\n          alt: article.source\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        target: \"_blank\",\n        href: article.url,\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: article.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"article-content\",\n        children: [article.text, /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"outer\",\n          \"aria-hidden\": \"true\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inner\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: article.highlight\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 36\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 7\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"articles\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"gradient-top\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [this.renderArticle(0), this.renderArticle(1), this.renderArticle(2), this.renderArticle(3), this.renderArticle(4), this.renderArticle(5), this.renderArticle(6), this.renderArticle(7), this.renderArticle(8), this.renderArticle(9), this.renderArticle(10), this.renderArticle(11), this.renderArticle(12), this.renderArticle(13)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"whitespace\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"gradient-bottom\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass SceneThree extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"scene-three\",\n      children: [/*#__PURE__*/_jsxDEV(Map, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Articles, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default SceneThree;","map":{"version":3,"sources":["/Users/charles/Documents/GitHub/1/revolution-2019/src/components/prologue/SceneThree.js"],"names":["React","ReactDOM","$","Tweet","scrollama","mapboxgl","economist","ft","npr","ny","nyt","aj","an","vox","gu","articles","title","source","url","tag","logo","text","highlight","config","style","accessToken","showMarkers","theme","chapters","id","alignment","hidden","tweetId","location","center","zoom","pitch","bearing","image","description","onChapterEnter","layer","opacity","onChapterExit","Map","Component","constructor","props","componentDidMount","layerTypes","alignments","story","document","getElementById","features","createElement","setAttribute","header","titleText","innerText","appendChild","subtitle","subtitleText","byline","bylineText","length","classList","add","forEach","record","idx","container","chapter","Image","src","innerHTML","footer","footerText","transformRequest","hasQuery","indexOf","suffix","map","interactive","tweetContainer","tweet","render","popup","Popup","offset","focusAfterOpen","closeButton","closeOnClick","setDOMContent","setLngLat","addTo","addClassName","scroller","on","use3dTerrain","addSource","setTerrain","addLayer","setup","step","progress","onStepEnter","response","find","chap","element","mapAnimation","callback","window","rotateAnimation","once","rotateNumber","getBearing","rotateTo","duration","easing","t","onStepExit","remove","addEventListener","resize","Articles","each","i","article","height","Math","max","min","getBoundingClientRect","top","innerHeight","css","scroll","renderArticle","SceneThree"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,KAAT,QAAsB,uBAAtB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,SAAP,MAAsB,yCAAtB;AACA,OAAOC,EAAP,MAAe,kCAAf;AACA,OAAOC,GAAP,MAAgB,mCAAhB;AACA,OAAOC,EAAP,MAAe,0CAAf;AACA,OAAOC,GAAP,MAAgB,8CAAhB;AACA,OAAOC,EAAP,MAAe,yCAAf;AACA,OAAOC,EAAP,MAAe,uCAAf;AACA,OAAOC,GAAP,MAAgB,mCAAhB;AACA,OAAOC,EAAP,MAAe,wCAAf;;AAEA,MAAMC,QAAQ,GAAG,CAAC;AAChBC,EAAAA,KAAK,EAAE,iEADS;AAEhBC,EAAAA,MAAM,EAAE,eAFQ;AAGhBC,EAAAA,GAAG,EAAE,oHAHW;AAIhBC,EAAAA,GAAG,EAAE,WAJW;AAKhBC,EAAAA,IAAI,EAAEd,SALU;AAMhBe,EAAAA,IAAI,EAAE,mGANU;AAOhBC,EAAAA,SAAS,EAAE;AAPK,CAAD,EAQd;AACDN,EAAAA,KAAK,EAAE,kCADN;AAEDC,EAAAA,MAAM,EAAE,qBAFP;AAGDC,EAAAA,GAAG,EAAE,iEAHJ;AAIDC,EAAAA,GAAG,EAAE,WAJJ;AAKDC,EAAAA,IAAI,EAAEb,EALL;AAMDc,EAAAA,IAAI,EAAE,6HANL;AAODC,EAAAA,SAAS,EAAE;AAPV,CARc,EAgBd;AACDN,EAAAA,KAAK,EAAE,0EADN;AAEDC,EAAAA,MAAM,EAAE,KAFP;AAGDC,EAAAA,GAAG,EAAE,kIAHJ;AAIDC,EAAAA,GAAG,EAAE,WAJJ;AAKDC,EAAAA,IAAI,EAAEZ,GALL;AAMDa,EAAAA,IAAI,EAAE,6HANL;AAODC,EAAAA,SAAS,EAAE;AAPV,CAhBc,EAwBd;AACDN,EAAAA,KAAK,EAAE,yCADN;AAEDC,EAAAA,MAAM,EAAE,gBAFP;AAGDC,EAAAA,GAAG,EAAE,4FAHJ;AAIDC,EAAAA,GAAG,EAAE,WAJJ;AAKDC,EAAAA,IAAI,EAAEX,EALL;AAMDY,EAAAA,IAAI,EAAE,kMANL;AAODC,EAAAA,SAAS,EAAE;AAPV,CAxBc,EAgCd;AACDN,EAAAA,KAAK,EAAE,gEADN;AAEDC,EAAAA,MAAM,EAAE,qBAFP;AAGDC,EAAAA,GAAG,EAAE,iEAHJ;AAIDC,EAAAA,GAAG,EAAE,WAJJ;AAKDC,EAAAA,IAAI,EAAEb,EALL;AAMDc,EAAAA,IAAI,EAAE,2RANL;AAODC,EAAAA,SAAS,EAAE;AAPV,CAhCc,EAwCd;AACDN,EAAAA,KAAK,EAAE,0DADN;AAEDC,EAAAA,MAAM,EAAE,gBAFP;AAGDC,EAAAA,GAAG,EAAE,uGAHJ;AAIDC,EAAAA,GAAG,EAAE,WAJJ;AAKDC,EAAAA,IAAI,EAAEX,EALL;AAMDY,EAAAA,IAAI,EAAE,kKANL;AAODC,EAAAA,SAAS,EAAE;AAPV,CAxCc,EAgDd;AACDN,EAAAA,KAAK,EAAE,uCADN;AAEDC,EAAAA,MAAM,EAAE,oBAFP;AAGDC,EAAAA,GAAG,EAAE,oEAHJ;AAIDC,EAAAA,GAAG,EAAE,WAJJ;AAKDC,EAAAA,IAAI,EAAEV,GALL;AAMDW,EAAAA,IAAI,EAAE,6MANL;AAODC,EAAAA,SAAS,EAAE;AAPV,CAhDc,EAwDd;AACDN,EAAAA,KAAK,EAAE,iEADN;AAEDC,EAAAA,MAAM,EAAE,qBAFP;AAGDC,EAAAA,GAAG,EAAE,iEAHJ;AAIDC,EAAAA,GAAG,EAAE,WAJJ;AAKDC,EAAAA,IAAI,EAAEb,EALL;AAMDc,EAAAA,IAAI,EAAE,oLANL;AAODC,EAAAA,SAAS,EAAE;AAPV,CAxDc,EAgEd;AACDN,EAAAA,KAAK,EAAE,+DADN;AAEDC,EAAAA,MAAM,EAAE,WAFP;AAGDC,EAAAA,GAAG,EAAE,sGAHJ;AAIDC,EAAAA,GAAG,EAAE,WAJJ;AAKDC,EAAAA,IAAI,EAAET,EALL;AAMDU,EAAAA,IAAI,EAAE,uMANL;AAODC,EAAAA,SAAS,EAAE;AAPV,CAhEc,EAwEd;AACDN,EAAAA,KAAK,EAAE,+EADN;AAEDC,EAAAA,MAAM,EAAE,UAFP;AAGDC,EAAAA,GAAG,EAAE,8HAHJ;AAIDC,EAAAA,GAAG,EAAE,WAJJ;AAKDC,EAAAA,IAAI,EAAER,EALL;AAMDS,EAAAA,IAAI,EAAE,wNANL;AAODC,EAAAA,SAAS,EAAE;AAPV,CAxEc,EAgFd;AACDN,EAAAA,KAAK,EAAE,sEADN;AAEDC,EAAAA,MAAM,EAAE,KAFP;AAGDC,EAAAA,GAAG,EAAE,4FAHJ;AAIDC,EAAAA,GAAG,EAAE,WAJJ;AAKDC,EAAAA,IAAI,EAAEP,GALL;AAMDQ,EAAAA,IAAI,EAAE,oIANL;AAODC,EAAAA,SAAS,EAAE;AAPV,CAhFc,EAwFd;AACDN,EAAAA,KAAK,EAAE,uDADN;AAEDC,EAAAA,MAAM,EAAE,WAFP;AAGDC,EAAAA,GAAG,EAAE,kGAHJ;AAIDC,EAAAA,GAAG,EAAE,WAJJ;AAKDC,EAAAA,IAAI,EAAET,EALL;AAMDU,EAAAA,IAAI,EAAE,mNANL;AAODC,EAAAA,SAAS,EAAE;AAPV,CAxFc,EAgGd;AACDN,EAAAA,KAAK,EAAE,kFADN;AAEDC,EAAAA,MAAM,EAAE,cAFP;AAGDC,EAAAA,GAAG,EAAE,yIAHJ;AAIDC,EAAAA,GAAG,EAAE,WAJJ;AAKDC,EAAAA,IAAI,EAAEN,EALL;AAMDO,EAAAA,IAAI,EAAE,wLANL;AAODC,EAAAA,SAAS,EAAE;AAPV,CAhGc,EAwGd;AACDN,EAAAA,KAAK,EAAE,0DADN;AAEDC,EAAAA,MAAM,EAAE,gBAFP;AAGDC,EAAAA,GAAG,EAAE,uGAHJ;AAIDC,EAAAA,GAAG,EAAE,WAJJ;AAKDC,EAAAA,IAAI,EAAEX,EALL;AAMDY,EAAAA,IAAI,EAAE,4GANL;AAODC,EAAAA,SAAS,EAAE;AAPV,CAxGc,CAAjB;AAsHA,IAAIC,MAAM,GAAG;AACTC,EAAAA,KAAK,EAAE,wDADE;AAETC,EAAAA,WAAW,EAAE,kGAFJ;AAGTC,EAAAA,WAAW,EAAE,IAHJ;AAITC,EAAAA,KAAK,EAAE,OAJE;AAKTC,EAAAA,QAAQ,EAAE,CACN;AACIC,IAAAA,EAAE,EAAE,OADR;AAEIC,IAAAA,SAAS,EAAE,MAFf;AAGIC,IAAAA,MAAM,EAAE,IAHZ;AAIIC,IAAAA,OAAO,EAAE,qBAJb;AAKIC,IAAAA,QAAQ,EAAE;AACNC,MAAAA,MAAM,EAAE,CAAC,CAAC,QAAF,EAAY,QAAZ,CADF;AAENC,MAAAA,IAAI,EAAE,CAFA;AAGNC,MAAAA,KAAK,EAAE,IAHD;AAINC,MAAAA,OAAO,EAAE;AAJH;AALd,GADM,EAaN;AACIR,IAAAA,EAAE,EAAE,WADR;AAEIC,IAAAA,SAAS,EAAE,MAFf;AAGIC,IAAAA,MAAM,EAAE,IAHZ;AAIIC,IAAAA,OAAO,EAAE,qBAJb;AAKIC,IAAAA,QAAQ,EAAE;AACNC,MAAAA,MAAM,EAAE,CAAC,QAAD,EAAW,QAAX,CADF;AAENC,MAAAA,IAAI,EAAE,CAFA;AAGNC,MAAAA,KAAK,EAAE,IAHD;AAINC,MAAAA,OAAO,EAAE;AAJH;AALd,GAbM,EAyBN;AACIR,IAAAA,EAAE,EAAE,MADR;AAEIC,IAAAA,SAAS,EAAE,MAFf;AAGIC,IAAAA,MAAM,EAAE,IAHZ;AAIIf,IAAAA,KAAK,EAAE,yBAJX;AAKIsB,IAAAA,KAAK,EAAE,EALX;AAMIC,IAAAA,WAAW,EAAE,gSANjB;AAOIN,IAAAA,QAAQ,EAAE;AACNC,MAAAA,MAAM,EAAE,CAAC,CAAC,QAAF,EAAY,QAAZ,CADF;AAENC,MAAAA,IAAI,EAAE,KAFA;AAGNC,MAAAA,KAAK,EAAE,KAHD;AAINC,MAAAA,OAAO,EAAE;AAJH,KAPd;AAaIG,IAAAA,cAAc,EAAE,CACZ;AACIC,MAAAA,KAAK,EAAE,aADX;AAEIC,MAAAA,OAAO,EAAE;AAFb,KADY,CAbpB;AAmBIC,IAAAA,aAAa,EAAE,CACX;AACIF,MAAAA,KAAK,EAAE,aADX;AAEIC,MAAAA,OAAO,EAAE;AAFb,KADW;AAnBnB,GAzBM,EAmDN;AACIb,IAAAA,EAAE,EAAE,WADR;AAEIC,IAAAA,SAAS,EAAE,MAFf;AAGIC,IAAAA,MAAM,EAAE,IAHZ;AAIIf,IAAAA,KAAK,EAAE,uBAJX;AAKIsB,IAAAA,KAAK,EAAE,EALX;AAMIC,IAAAA,WAAW,EAAE,iRANjB;AAOIN,IAAAA,QAAQ,EAAE;AACNC,MAAAA,MAAM,EAAE,CAAC,CAAC,QAAF,EAAY,QAAZ,CADF;AAENC,MAAAA,IAAI,EAAE,KAFA;AAGNC,MAAAA,KAAK,EAAE,KAHD;AAINC,MAAAA,OAAO,EAAE;AAJH,KAPd;AAaIG,IAAAA,cAAc,EAAE,CACZ;AACIC,MAAAA,KAAK,EAAE,WADX;AAEIC,MAAAA,OAAO,EAAE;AAFb,KADY,CAbpB;AAmBIC,IAAAA,aAAa,EAAE,CACX;AACIF,MAAAA,KAAK,EAAE,WADX;AAEIC,MAAAA,OAAO,EAAE;AAFb,KADW;AAnBnB,GAnDM;AALD,CAAb;;AAgGA,MAAME,GAAN,SAAkB5C,KAAK,CAAC6C,SAAxB,CAAkC;AAChCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACD;;AACDC,EAAAA,iBAAiB,GAAG;AAClB,QAAIC,UAAU,GAAG;AACb,cAAQ,CAAC,cAAD,CADK;AAEb,cAAQ,CAAC,cAAD,CAFK;AAGb,gBAAU,CAAC,gBAAD,EAAmB,uBAAnB,CAHG;AAIb,gBAAU,CAAC,cAAD,EAAiB,cAAjB,CAJG;AAKb,gBAAU,CAAC,gBAAD,CALG;AAMb,wBAAkB,CAAC,wBAAD,CANL;AAOb,iBAAW,CAAC,iBAAD;AAPE,KAAjB;AAUA,QAAIC,UAAU,GAAG;AACb,cAAQ,OADK;AAEb,gBAAU,UAFG;AAGb,eAAS,QAHI;AAIb,cAAQ;AAJK,KAAjB;AAOA,QAAIC,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAZ;AACA,QAAIC,QAAQ,GAAGF,QAAQ,CAACG,aAAT,CAAuB,KAAvB,CAAf;AACAD,IAAAA,QAAQ,CAACE,YAAT,CAAsB,IAAtB,EAA4B,UAA5B;AAEA,QAAIC,MAAM,GAAGL,QAAQ,CAACG,aAAT,CAAuB,KAAvB,CAAb;;AAEA,QAAIhC,MAAM,CAACP,KAAX,EAAkB;AACd,UAAI0C,SAAS,GAAGN,QAAQ,CAACG,aAAT,CAAuB,IAAvB,CAAhB;AACAG,MAAAA,SAAS,CAACC,SAAV,GAAsBpC,MAAM,CAACP,KAA7B;AACAyC,MAAAA,MAAM,CAACG,WAAP,CAAmBF,SAAnB;AACH;;AAED,QAAInC,MAAM,CAACsC,QAAX,EAAqB;AACjB,UAAIC,YAAY,GAAGV,QAAQ,CAACG,aAAT,CAAuB,IAAvB,CAAnB;AACAO,MAAAA,YAAY,CAACH,SAAb,GAAyBpC,MAAM,CAACsC,QAAhC;AACAJ,MAAAA,MAAM,CAACG,WAAP,CAAmBE,YAAnB;AACH;;AAED,QAAIvC,MAAM,CAACwC,MAAX,EAAmB;AACf,UAAIC,UAAU,GAAGZ,QAAQ,CAACG,aAAT,CAAuB,GAAvB,CAAjB;AACAS,MAAAA,UAAU,CAACL,SAAX,GAAuBpC,MAAM,CAACwC,MAA9B;AACAN,MAAAA,MAAM,CAACG,WAAP,CAAmBI,UAAnB;AACH;;AAED,QAAIP,MAAM,CAACE,SAAP,CAAiBM,MAAjB,GAA0B,CAA9B,EAAiC;AAC7BR,MAAAA,MAAM,CAACS,SAAP,CAAiBC,GAAjB,CAAqB5C,MAAM,CAACI,KAA5B;AACA8B,MAAAA,MAAM,CAACD,YAAP,CAAoB,IAApB,EAA0B,QAA1B;AACAL,MAAAA,KAAK,CAACS,WAAN,CAAkBH,MAAlB;AACH;;AAEDlC,IAAAA,MAAM,CAACK,QAAP,CAAgBwC,OAAhB,CAAwB,CAACC,MAAD,EAASC,GAAT,KAAiB;AACrC,UAAIC,SAAS,GAAGnB,QAAQ,CAACG,aAAT,CAAuB,KAAvB,CAAhB;AACA,UAAIiB,OAAO,GAAGpB,QAAQ,CAACG,aAAT,CAAuB,KAAvB,CAAd;;AAEA,UAAIc,MAAM,CAACrD,KAAX,EAAkB;AACd,YAAIA,KAAK,GAAGoC,QAAQ,CAACG,aAAT,CAAuB,IAAvB,CAAZ;AACAvC,QAAAA,KAAK,CAAC2C,SAAN,GAAkBU,MAAM,CAACrD,KAAzB;AACAwD,QAAAA,OAAO,CAACZ,WAAR,CAAoB5C,KAApB;AACH;;AAED,UAAIqD,MAAM,CAAC/B,KAAX,EAAkB;AACd,YAAIA,KAAK,GAAG,IAAImC,KAAJ,EAAZ;AACAnC,QAAAA,KAAK,CAACoC,GAAN,GAAYL,MAAM,CAAC/B,KAAnB;AACAkC,QAAAA,OAAO,CAACZ,WAAR,CAAoBtB,KAApB;AACH;;AAED,UAAI+B,MAAM,CAAC9B,WAAX,EAAwB;AACpB,YAAIY,KAAK,GAAGC,QAAQ,CAACG,aAAT,CAAuB,GAAvB,CAAZ;AACAJ,QAAAA,KAAK,CAACwB,SAAN,GAAkBN,MAAM,CAAC9B,WAAzB;AACAiC,QAAAA,OAAO,CAACZ,WAAR,CAAoBT,KAApB;AACH;;AAEDoB,MAAAA,SAAS,CAACf,YAAV,CAAuB,IAAvB,EAA6Ba,MAAM,CAACxC,EAApC;AACA0C,MAAAA,SAAS,CAACL,SAAV,CAAoBC,GAApB,CAAwB,MAAxB;;AACA,UAAIG,GAAG,KAAK,CAAZ,EAAe;AACXC,QAAAA,SAAS,CAACL,SAAV,CAAoBC,GAApB,CAAwB,QAAxB;AACH;;AAEDK,MAAAA,OAAO,CAACN,SAAR,CAAkBC,GAAlB,CAAsB5C,MAAM,CAACI,KAA7B;AACA4C,MAAAA,SAAS,CAACX,WAAV,CAAsBY,OAAtB;AACAD,MAAAA,SAAS,CAACL,SAAV,CAAoBC,GAApB,CAAwBjB,UAAU,CAACmB,MAAM,CAACvC,SAAR,CAAV,IAAgC,UAAxD;;AACA,UAAIuC,MAAM,CAACtC,MAAX,EAAmB;AACfwC,QAAAA,SAAS,CAACL,SAAV,CAAoBC,GAApB,CAAwB,QAAxB;AACH;;AACDb,MAAAA,QAAQ,CAACM,WAAT,CAAqBW,SAArB;AACH,KAnCD;AAqCApB,IAAAA,KAAK,CAACS,WAAN,CAAkBN,QAAlB;AAEA,QAAIsB,MAAM,GAAGxB,QAAQ,CAACG,aAAT,CAAuB,KAAvB,CAAb;;AAEA,QAAIhC,MAAM,CAACqD,MAAX,EAAmB;AACf,UAAIC,UAAU,GAAGzB,QAAQ,CAACG,aAAT,CAAuB,GAAvB,CAAjB;AACAsB,MAAAA,UAAU,CAACF,SAAX,GAAuBpD,MAAM,CAACqD,MAA9B;AACAA,MAAAA,MAAM,CAAChB,WAAP,CAAmBiB,UAAnB;AACH;;AAED,QAAID,MAAM,CAACjB,SAAP,CAAiBM,MAAjB,GAA0B,CAA9B,EAAiC;AAC7BW,MAAAA,MAAM,CAACV,SAAP,CAAiBC,GAAjB,CAAqB5C,MAAM,CAACI,KAA5B;AACAiD,MAAAA,MAAM,CAACpB,YAAP,CAAoB,IAApB,EAA0B,QAA1B;AACAL,MAAAA,KAAK,CAACS,WAAN,CAAkBgB,MAAlB;AACH;;AAEDvE,IAAAA,QAAQ,CAACoB,WAAT,GAAuBF,MAAM,CAACE,WAA9B;;AAEA,UAAMqD,gBAAgB,GAAI5D,GAAD,IAAS;AAC9B,YAAM6D,QAAQ,GAAG7D,GAAG,CAAC8D,OAAJ,CAAY,GAAZ,MAAqB,CAAC,CAAvC;AACA,YAAMC,MAAM,GAAGF,QAAQ,GAAG,8BAAH,GAAoC,8BAA3D;AAEA,aAAO;AACL7D,QAAAA,GAAG,EAAEA,GAAG,GAAG+D;AADN,OAAP;AAGH,KAPD;;AASA,QAAIC,GAAG,GAAG,IAAI7E,QAAQ,CAACuC,GAAb,CAAiB;AACvB2B,MAAAA,SAAS,EAAE,KADY;AAEvB/C,MAAAA,KAAK,EAAED,MAAM,CAACC,KAFS;AAGvBU,MAAAA,MAAM,EAAEX,MAAM,CAACK,QAAP,CAAgB,CAAhB,EAAmBK,QAAnB,CAA4BC,MAHb;AAIvBC,MAAAA,IAAI,EAAEZ,MAAM,CAACK,QAAP,CAAgB,CAAhB,EAAmBK,QAAnB,CAA4BE,IAJX;AAKvBE,MAAAA,OAAO,EAAEd,MAAM,CAACK,QAAP,CAAgB,CAAhB,EAAmBK,QAAnB,CAA4BI,OALd;AAMvBD,MAAAA,KAAK,EAAEb,MAAM,CAACK,QAAP,CAAgB,CAAhB,EAAmBK,QAAnB,CAA4BG,KANZ;AAOvB+C,MAAAA,WAAW,EAAE,KAPU;AAQvBL,MAAAA,gBAAgB,EAAEA;AARK,KAAjB,CAAV;;AAWA,QAAIvD,MAAM,CAACG,WAAX,EAAwB;AACtB,UAAI0D,cAAc,GAAGhC,QAAQ,CAACG,aAAT,CAAuB,KAAvB,CAArB;;AACA,UAAI8B,KAAK,gBAAG,QAAC,KAAD;AAAO,QAAA,OAAO,EAAE9D,MAAM,CAACK,QAAP,CAAgB,CAAhB,EAAmBI,OAAnC;AAA4C,QAAA,OAAO,EAAE;AAAEL,UAAAA,KAAK,EAAE;AAAT;AAArD;AAAA;AAAA;AAAA;AAAA,cAAZ;;AACA1B,MAAAA,QAAQ,CAACqF,MAAT,CAAgBD,KAAhB,EAAuBD,cAAvB;AACA,UAAIG,KAAK,GAAG,IAAIlF,QAAQ,CAACmF,KAAb,CAAmB;AAC7BC,QAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,CAAC,GAAL,CADqB;AAE7BC,QAAAA,cAAc,EAAE,KAFa;AAG7BC,QAAAA,WAAW,EAAE,KAHgB;AAI7BC,QAAAA,YAAY,EAAE;AAJe,OAAnB,EAMXC,aANW,CAMGT,cANH,CAAZ;AAOAG,MAAAA,KAAK,CAACO,SAAN,CAAgBvE,MAAM,CAACK,QAAP,CAAgB,CAAhB,EAAmBK,QAAnB,CAA4BC,MAA5C,EAAoD6D,KAApD,CAA0Db,GAA1D;AACAK,MAAAA,KAAK,CAACS,YAAN,CAAmB,aAAnB;AACD,KAxIiB,CA0IlB;;;AACA,QAAIC,QAAQ,GAAG7F,SAAS,EAAxB;AAEA8E,IAAAA,GAAG,CAACgB,EAAJ,CAAO,MAAP,EAAe,YAAW;AACtB,UAAI3E,MAAM,CAAC4E,YAAX,EAAyB;AACrBjB,QAAAA,GAAG,CAACkB,SAAJ,CAAc,YAAd,EAA4B;AACxB,kBAAQ,YADgB;AAExB,iBAAO,uCAFiB;AAGxB,sBAAY,GAHY;AAIxB,qBAAW;AAJa,SAA5B,EADqB,CAOrB;;AACAlB,QAAAA,GAAG,CAACmB,UAAJ,CAAe;AAAE,oBAAU,YAAZ;AAA0B,0BAAgB;AAA1C,SAAf,EARqB,CAUrB;;AACAnB,QAAAA,GAAG,CAACoB,QAAJ,CAAa;AACT,gBAAM,KADG;AAET,kBAAQ,KAFC;AAGT,mBAAS;AACL,wBAAY,YADP;AAEL,kCAAsB,CAAC,GAAD,EAAM,GAAN,CAFjB;AAGL,4CAAgC;AAH3B;AAHA,SAAb;AASH;;AAAA,OArBqB,CAuBtB;;AACAL,MAAAA,QAAQ,CACPM,KADD,CACO;AACHC,QAAAA,IAAI,EAAE,OADH;AAEHf,QAAAA,MAAM,EAAE,GAFL;AAGHgB,QAAAA,QAAQ,EAAE;AAHP,OADP,EAMCC,WAND,CAMaC,QAAQ,IAAI;AACrB,YAAInC,OAAO,GAAGjD,MAAM,CAACK,QAAP,CAAgBgF,IAAhB,CAAqBC,IAAI,IAAIA,IAAI,CAAChF,EAAL,KAAY8E,QAAQ,CAACG,OAAT,CAAiBjF,EAA1D,CAAd;AACA8E,QAAAA,QAAQ,CAACG,OAAT,CAAiB5C,SAAjB,CAA2BC,GAA3B,CAA+B,QAA/B;AACAe,QAAAA,GAAG,CAACV,OAAO,CAACuC,YAAR,IAAwB,OAAzB,CAAH,CAAqCvC,OAAO,CAACvC,QAA7C;;AAEA,YAAIV,MAAM,CAACG,WAAX,EAAwB;AACpB6D,UAAAA,KAAK,CAACO,SAAN,CAAgBtB,OAAO,CAACvC,QAAR,CAAiBC,MAAjC;AACH;;AACD,YAAIsC,OAAO,CAACwC,QAAZ,EAAsB;AAClBC,UAAAA,MAAM,CAACzC,OAAO,CAACwC,QAAT,CAAN;AACH;;AACD,YAAIxC,OAAO,CAAC0C,eAAZ,EAA6B;AACzBhC,UAAAA,GAAG,CAACiC,IAAJ,CAAS,SAAT,EAAoB,YAAW;AAC3B,kBAAMC,YAAY,GAAGlC,GAAG,CAACmC,UAAJ,EAArB;AACAnC,YAAAA,GAAG,CAACoC,QAAJ,CAAaF,YAAY,GAAG,EAA5B,EAAgC;AAC5BG,cAAAA,QAAQ,EAAE,KADkB;AACXC,cAAAA,MAAM,EAAE,UAAUC,CAAV,EAAa;AAClC,uBAAOA,CAAP;AACH;AAH2B,aAAhC;AAKH,WAPD;AAQH;AACJ,OA3BD,EA4BCC,UA5BD,CA4BYf,QAAQ,IAAI;AACpB,YAAInC,OAAO,GAAGjD,MAAM,CAACK,QAAP,CAAgBgF,IAAhB,CAAqBC,IAAI,IAAIA,IAAI,CAAChF,EAAL,KAAY8E,QAAQ,CAACG,OAAT,CAAiBjF,EAA1D,CAAd;AACA8E,QAAAA,QAAQ,CAACG,OAAT,CAAiB5C,SAAjB,CAA2ByD,MAA3B,CAAkC,QAAlC;AACH,OA/BD;AAgCH,KAxDD,EA7IkB,CAuMlB;;AACAV,IAAAA,MAAM,CAACW,gBAAP,CAAwB,QAAxB,EAAkC3B,QAAQ,CAAC4B,MAA3C;AACD;;AACDvC,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,EAAE,EAAC,iBAAR;AAAA,8BACE;AAAK,QAAA,EAAE,EAAC;AAAR;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAK,QAAA,EAAE,EAAC;AAAR;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAMD;;AArN+B;;AAwNlC,MAAMwC,QAAN,SAAuB9H,KAAK,CAAC6C,SAA7B,CAAuC;AACrCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACD;;AACDC,EAAAA,iBAAiB,GAAG;AAClB9C,IAAAA,CAAC,CAAC,QAAD,CAAD,CAAY6H,IAAZ,CAAiB,CAACC,CAAD,EAAIC,OAAJ,KAAgB;AAC/B,UAAIC,MAAM,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACE,GAAL,CAAS,GAAT,EAAc,OAAOJ,OAAO,CAACK,qBAAR,GAAgCC,GAAhC,GAAuCtB,MAAM,CAACuB,WAAP,GAAqB,CAAnE,IAAyEvB,MAAM,CAACuB,WAA9F,CAAZ,CAAb;AACAtI,MAAAA,CAAC,CAAC+H,OAAD,CAAD,CAAWQ,GAAX,CAAe,WAAf,EAA4B,gBAAgB,CAACP,MAAjB,GAA0B,IAAtD;AACAhI,MAAAA,CAAC,CAAC+H,OAAD,CAAD,CAAWrB,IAAX,CAAgB,QAAhB,EAA0B6B,GAA1B,CAA8B,WAA9B,EAA2C,gBAAgBP,MAAhB,GAAyB,IAApE;AACD,KAJD;AAKAhI,IAAAA,CAAC,CAAC,WAAD,CAAD,CAAewI,MAAf,CAAsB,YAAW;AAC/BxI,MAAAA,CAAC,CAAC,QAAD,CAAD,CAAY6H,IAAZ,CAAiB,CAACC,CAAD,EAAIC,OAAJ,KAAgB;AAC/B,YAAIC,MAAM,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACE,GAAL,CAAS,GAAT,EAAc,OAAOJ,OAAO,CAACK,qBAAR,GAAgCC,GAAhC,GAAuCtB,MAAM,CAACuB,WAAP,GAAqB,CAAnE,IAAyEvB,MAAM,CAACuB,WAA9F,CAAZ,CAAb;AACAtI,QAAAA,CAAC,CAAC+H,OAAD,CAAD,CAAWQ,GAAX,CAAe,WAAf,EAA4B,gBAAgB,CAACP,MAAjB,GAA0B,IAAtD;AACAhI,QAAAA,CAAC,CAAC+H,OAAD,CAAD,CAAWrB,IAAX,CAAgB,QAAhB,EAA0B6B,GAA1B,CAA8B,WAA9B,EAA2C,gBAAgBP,MAAhB,GAAyB,IAApE;AACD,OAJD;AAKD,KAND;AAOD;;AACDS,EAAAA,aAAa,CAACX,CAAD,EAAI;AACf,QAAIC,OAAO,GAAGlH,QAAQ,CAACiH,CAAD,CAAtB;AACA,wBACE;AAAK,MAAA,SAAS,EAAE,aAAaC,OAAO,CAAC9G,GAArC;AAAA,8BACE;AAAG,QAAA,MAAM,EAAC,QAAV;AAAmB,QAAA,IAAI,EAAE8G,OAAO,CAAC/G,GAAjC;AAAA,+BACE;AAAK,UAAA,GAAG,EAAE+G,OAAO,CAAC7G,IAAlB;AAAwB,UAAA,GAAG,EAAE6G,OAAO,CAAChH;AAArC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAG,QAAA,MAAM,EAAC,QAAV;AAAmB,QAAA,IAAI,EAAEgH,OAAO,CAAC/G,GAAjC;AAAA,+BACE;AAAA,oBAAK+G,OAAO,CAACjH;AAAb;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAJF,eAOE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,mBACGiH,OAAO,CAAC5G,IADX,eAEE;AAAM,UAAA,SAAS,EAAC,OAAhB;AAAwB,yBAAY,MAApC;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,OAAf;AAAA,mCAAuB;AAAA,wBAAO4G,OAAO,CAAC3G;AAAf;AAAA;AAAA;AAAA;AAAA;AAAvB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAPF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAgBD;;AACDgE,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,EAAE,EAAC,UAAR;AAAA,8BACE;AAAK,QAAA,EAAE,EAAC;AAAR;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA,mBACG,KAAKqD,aAAL,CAAmB,CAAnB,CADH,EAEG,KAAKA,aAAL,CAAmB,CAAnB,CAFH,EAGG,KAAKA,aAAL,CAAmB,CAAnB,CAHH,EAIG,KAAKA,aAAL,CAAmB,CAAnB,CAJH,EAKG,KAAKA,aAAL,CAAmB,CAAnB,CALH,EAMG,KAAKA,aAAL,CAAmB,CAAnB,CANH,EAOG,KAAKA,aAAL,CAAmB,CAAnB,CAPH,EAQG,KAAKA,aAAL,CAAmB,CAAnB,CARH,EASG,KAAKA,aAAL,CAAmB,CAAnB,CATH,EAUG,KAAKA,aAAL,CAAmB,CAAnB,CAVH,EAWG,KAAKA,aAAL,CAAmB,EAAnB,CAXH,EAYG,KAAKA,aAAL,CAAmB,EAAnB,CAZH,EAaG,KAAKA,aAAL,CAAmB,EAAnB,CAbH,EAcG,KAAKA,aAAL,CAAmB,EAAnB,CAdH;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,eAkBE;AAAK,QAAA,EAAE,EAAC;AAAR;AAAA;AAAA;AAAA;AAAA,cAlBF,eAmBE;AAAK,QAAA,EAAE,EAAC;AAAR;AAAA;AAAA;AAAA;AAAA,cAnBF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAuBD;;AA7DoC;;AAgEvC,MAAMC,UAAN,SAAyB5I,KAAK,CAAC6C,SAA/B,CAAyC;AACvCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACD;;AACDuC,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,EAAE,EAAC,aAAR;AAAA,8BACE,QAAC,GAAD;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAMD;;AAXsC;;AAczC,eAAesD,UAAf","sourcesContent":["import React from \"react\";\nimport ReactDOM from 'react-dom';\nimport $ from \"jquery\";\nimport { Tweet } from 'react-twitter-widgets';\nimport scrollama from \"scrollama\";\nimport mapboxgl from \"mapbox-gl\";\nimport economist from \"../../media/prologue/logo-economist.png\";\nimport ft from \"../../media/prologue/logo-ft.png\";\nimport npr from \"../../media/prologue/logo-npr.png\";\nimport ny from \"../../media/prologue/logo-new-yorker.png\";\nimport nyt from \"../../media/prologue/logo-new-york-times.png\";\nimport aj from \"../../media/prologue/logo-aljazeera.png\";\nimport an from \"../../media/prologue/logo-annahar.png\";\nimport vox from \"../../media/prologue/logo-vox.png\";\nimport gu from \"../../media/prologue/logo-guardian.png\";\n\nconst articles = [{\n  title: \"Digital media fuel global protests but can be used against them\",\n  source: \"The Economist\",\n  url: \"https://www.economist.com/international/2021/01/16/digital-media-fuel-global-protests-but-can-be-used-against-them\",\n  tag: \"article-1\",\n  logo: economist,\n  text: \"Protesters in 2019 relied heavily on digital media for organisation, publicity and communication.\",\n  highlight: \"Protesters in 2019 relied heavily on digital media for organisation, publicity and communication.\"\n}, {\n  title: \"2019: the year of street protest\",\n  source: \"The Financial Times\",\n  url: \"https://www.ft.com/content/9f7e94c4-2563-11ea-9a4f-963f0ec7e134\",\n  tag: \"article-3\",\n  logo: ft,\n  text: \"Social media is a powerful organising tool everywhere — allowing protesters to crowdsource grievances, slogans and tactics.\",\n  highlight: \"Social media is a powerful organising tool everywhere — allowing protesters to crowdsource grievances, slogans and tactics.\"\n}, {\n  title: \"Lebanon's Government Is Accused Of Swarming WhatsApp To Catch Protesters\",\n  source: \"NPR\",\n  url: \"https://www.npr.org/2020/03/09/809684634/lebanons-government-is-accused-of-swarming-whatsapp-to-catch-protesters?t=1613410699449\",\n  tag: \"article-2\",\n  logo: npr,\n  text: \"They organized and shared updates on WhatsApp, streamed protests live on Twitter and highlighted police abuse on Instagram.\",\n  highlight: \"They organized and shared updates on WhatsApp, streamed protests live on Twitter and highlighted police abuse on Instagram.\"\n}, {\n  title: \"The Second Act of Social-Media Activism\",\n  source: \"The New Yorker\",\n  url: \"https://www.newyorker.com/culture/cultural-comment/the-second-act-of-social-media-activism\",\n  tag: \"article-1\",\n  logo: ny,\n  text: \"Protest guides, generated from years of on-the-ground activist experience, are readily shared over Twitter and Instagram, telling readers how to blur faces in photographs or aid in de-arrests.\",\n  highlight: \"Protest guides, generated from years of on-the-ground activist experience, are readily shared over Twitter and Instagram\"\n}, {\n  title: \"Leaderless rebellion: how social media enables global protests\",\n  source: \"The Financial Times\",\n  url: \"https://www.ft.com/content/19dc5dfe-f67b-11e9-a79c-bc9acae3b654\",\n  tag: \"article-3\",\n  logo: ft,\n  text: \"Social media also allows a movement in one place to take inspiration from news of revolts in another. The occupation of the airport in Barcelona last week was a tactic borrowed from Hong Kong. The Sudanese and Algerian uprisings this year borrowed each other’s imagery and slogans.\",\n  highlight: \"Social media also allows a movement in one place to take inspiration from news of revolts in another.\"\n}, {\n  title: \"The Story of 2019: Protests in Every Corner of the Globe\",\n  source: \"The New Yorker\",\n  url: \"https://www.newyorker.com/news/our-columnists/the-story-of-2019-protests-in-every-corner-of-the-globe\",\n  tag: \"article-1\",\n  logo: ny,\n  text: \"There may be a global contagion due to social media. Seeing protests in other places motivates people to be willing to go to the streets in their own countries.\",\n  highlight: \"There may be a global contagion due to social media.\"\n}, {\n  title: \"Why Protest Tactics Spread Like Memes\",\n  source: \"The New York Times\",\n  url: \"https://www.nytimes.com/2020/07/31/style/viral-protest-videos.html\",\n  tag: \"article-2\",\n  logo: nyt,\n  text: \"Activists from around the world do actively learn from each other and exchange tactical tips. Images of protest spread on social media reveal many other matching moments from opposite sides of the world.\",\n  highlight: \"Activists from around the world do actively learn from each other and exchange tactical tips.\"\n}, {\n  title: \"Colombia protests pile pressure on president and hamper reforms\",\n  source: \"The Financial Times\",\n  url: \"https://www.ft.com/content/a2d80d10-11ba-11ea-a225-db2f231cfeae\",\n  tag: \"article-3\",\n  logo: ft,\n  text: \"Demonstrators in Colombia have copied the tactics of protests sweeping other Latin American nations, organising via social media and beating pots and pans to press their demands.\",\n  highlight: \"Demonstrators in Colombia have copied the tactics of protests sweeping other Latin American nations\"\n}, {\n  title: \"Pots and pans ‘cacerolazo’ protests echo across Latin America\",\n  source: \"AlJazeera\",\n  url: \"https://www.aljazeera.com/news/2019/12/2/pots-and-pans-cacerolazo-protests-echo-across-latin-america\",\n  tag: \"article-2\",\n  logo: aj,\n  text: \"When 6pm struck in Colombia, the sound of banging pots and pans – the “cacerolazo” – echoed across the country like they have since the mass anti-government protest kicked off more than a week ago.\",\n  highlight: \"When 6pm struck in Colombia, the sound of banging pots and pans – the “cacerolazo” – echoed across the country\"\n}, {\n  title: \"A Cacophonous Revolution: When pans and pots become the voice of the protests\",\n  source: \"An-Nahar\",\n  url: \"https://www.annahar.com/english/article/1068283-a-cacophonous-revolution-when-pans-and-pots-become-the-voice-of-the-protests\",\n  tag: \"article-2\",\n  logo: an,\n  text: \"Cookware cacophony has been the spotlight of the Lebanese protests during the past few days, as protesters resorted to banging their pots and pans to denounce the country’s endemic corruption and escalating crisis.\",\n  highlight: \"Cookware cacophony has been the spotlight of the Lebanese protests during the past few days, as protesters resorted to banging their pots and pans\"\n}, {\n  title: \"Why protesters have been banging pots and pans outside their windows\",\n  source: \"Vox\",\n  url: \"https://www.vox.com/identities/2020/6/5/21279690/protest-george-floyd-cacerolazo-bang-pots\",\n  tag: \"article-1\",\n  logo: vox,\n  text: \"Protesters in Washington, DC, Philadelphia, and Los Angeles have all been spotted participating in cacerolazos over the past week.\",\n  highlight: \"Protesters in Washington, DC, Philadelphia, and Los Angeles have all been spotted participating in cacerolazos over the past week.\"\n}, {\n  title: \"Chile’s ‘A rapist in your path’ chant hits 200 cities\",\n  source: \"AlJazeera\",\n  url: \"https://www.aljazeera.com/news/2019/12/20/chiles-a-rapist-in-your-path-chant-hits-200-cities-map\",\n  tag: \"article-2\",\n  logo: aj,\n  text: \"From Santiago to Nairobi and Tijuana to Stockholm, women in hundreds of cities worldwide have executed a Chilean choreographed feminist performance protesting sexual assault, victim-blaming and state violence.\",\n  highlight: \"From Santiago to Nairobi and Tijuana to Stockholm, women in hundreds of cities worldwide have executed a Chilean choreographed feminist performance\"\n}, {\n  title: \"‘The rapist is you!’: why a Chilean protest chant is being sung around the world\",\n  source: \"The Guardian\",\n  url: \"https://www.theguardian.com/society/2020/feb/03/the-rapist-is-you-chilean-protest-song-chanted-around-the-world-un-iolador-en-tu-camino\",\n  tag: \"article-3\",\n  logo: gu,\n  text: \"Since November, Un Violador en Tu Camino has been sung everywhere from France and Mexico to Kenya and India as a protest against the systemic use of sexual violence to repress women.\",\n  highlight: \"Since November, Un Violador en Tu Camino has been sung everywhere from France and Mexico to Kenya and India\"\n}, {\n  title: \"The Story of 2019: Protests in Every Corner of the Globe\",\n  source: \"The New Yorker\",\n  url: \"https://www.newyorker.com/news/our-columnists/the-story-of-2019-protests-in-every-corner-of-the-globe\",\n  tag: \"article-1\",\n  logo: ny,\n  text: \"The protests of 2019 have been epochal, the fury real, and the underlying message profound for the future.\",\n  highlight: \"The protests of 2019 have been epochal, the fury real, and the underlying message profound for the future.\"\n}];\n\n\n\n\n\nvar config = {\n    style: 'mapbox://styles/charlesingea/ckkwgll2a4zb417n42kaelwja',\n    accessToken: 'pk.eyJ1IjoiY2hhcmxlc2luZ2VhIiwiYSI6ImNqcWpuc3lxcTBpcjc0M290YjRxbnJ1ZngifQ.wGSPWvAan_QiZsy2L4uoyg',\n    showMarkers: true,\n    theme: 'light',\n    chapters: [\n        {\n            id: 'usa-1',\n            alignment: 'left',\n            hidden: true,\n            tweetId: '1266504172494520325',\n            location: {\n                center: [-93.26223, 44.98240],\n                zoom: 9,\n                pitch: 0.00,\n                bearing: 0.00\n            },\n        },\n        {\n            id: 'lebanon-1',\n            alignment: 'left',\n            hidden: true,\n            tweetId: '1185513821189869571',\n            location: {\n                center: [35.50461, 33.88607],\n                zoom: 9,\n                pitch: 0.00,\n                bearing: 0.00\n            },\n        },\n        {\n            id: 'wiss',\n            alignment: 'left',\n            hidden: true,\n            title: 'Wissahickon Park Trails',\n            image: '',\n            description: 'This steep, rocky gorge can be surprisingly technical. Follow the orange and yellow trails to repeatedly climb and descend through the schist hillsides (careful of the cliffs), or stick to the gravel Forbidden Drive for a relaxing ride along the creek. You\\'ll forget you\\'re in a city.',\n            location: {\n                center: [-75.21223, 40.05028],\n                zoom: 13.08,\n                pitch: 47.50,\n                bearing: 32.80\n            },\n            onChapterEnter: [\n                {\n                    layer: 'wissahickon',\n                    opacity: 1\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'wissahickon',\n                    opacity: 0\n                }\n            ]\n        },\n        {\n            id: 'pennypack',\n            alignment: 'left',\n            hidden: true,\n            title: 'Pennypack Park Trails',\n            image: '',\n            description: 'Pennypack is a great introduction trail system. Not too steep and not too technical, the beautiful wooded park also provides a great escape from urban life. The south side trails are originally bridle trails, so be nice to equestrians and dismount when you approach them.',\n            location: {\n                center: [-75.05685, 40.06839],\n                zoom: 13.73,\n                pitch: 43.50,\n                bearing: 96.80\n            },\n            onChapterEnter: [\n                {\n                    layer: 'pennypack',\n                    opacity: 1\n                }\n            ],\n            onChapterExit: [\n                {\n                    layer: 'pennypack',\n                    opacity: 0\n                }\n            ]\n        }\n    ]\n};\n\n\n\n\n\n\n\n\n\n\n\n\nclass Map extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    var layerTypes = {\n        'fill': ['fill-opacity'],\n        'line': ['line-opacity'],\n        'circle': ['circle-opacity', 'circle-stroke-opacity'],\n        'symbol': ['icon-opacity', 'text-opacity'],\n        'raster': ['raster-opacity'],\n        'fill-extrusion': ['fill-extrusion-opacity'],\n        'heatmap': ['heatmap-opacity']\n    }\n\n    var alignments = {\n        'left': 'lefty',\n        'center': 'centered',\n        'right': 'righty',\n        'full': 'fully'\n    }\n\n    var story = document.getElementById('story');\n    var features = document.createElement('div');\n    features.setAttribute('id', 'features');\n\n    var header = document.createElement('div');\n\n    if (config.title) {\n        var titleText = document.createElement('h1');\n        titleText.innerText = config.title;\n        header.appendChild(titleText);\n    }\n\n    if (config.subtitle) {\n        var subtitleText = document.createElement('h2');\n        subtitleText.innerText = config.subtitle;\n        header.appendChild(subtitleText);\n    }\n\n    if (config.byline) {\n        var bylineText = document.createElement('p');\n        bylineText.innerText = config.byline;\n        header.appendChild(bylineText);\n    }\n\n    if (header.innerText.length > 0) {\n        header.classList.add(config.theme);\n        header.setAttribute('id', 'header');\n        story.appendChild(header);\n    }\n\n    config.chapters.forEach((record, idx) => {\n        var container = document.createElement('div');\n        var chapter = document.createElement('div');\n\n        if (record.title) {\n            var title = document.createElement('h3');\n            title.innerText = record.title;\n            chapter.appendChild(title);\n        }\n\n        if (record.image) {\n            var image = new Image();\n            image.src = record.image;\n            chapter.appendChild(image);\n        }\n\n        if (record.description) {\n            var story = document.createElement('p');\n            story.innerHTML = record.description;\n            chapter.appendChild(story);\n        }\n\n        container.setAttribute('id', record.id);\n        container.classList.add('step');\n        if (idx === 0) {\n            container.classList.add('active');\n        }\n\n        chapter.classList.add(config.theme);\n        container.appendChild(chapter);\n        container.classList.add(alignments[record.alignment] || 'centered');\n        if (record.hidden) {\n            container.classList.add('hidden');\n        }\n        features.appendChild(container);\n    });\n\n    story.appendChild(features);\n\n    var footer = document.createElement('div');\n\n    if (config.footer) {\n        var footerText = document.createElement('p');\n        footerText.innerHTML = config.footer;\n        footer.appendChild(footerText);\n    }\n\n    if (footer.innerText.length > 0) {\n        footer.classList.add(config.theme);\n        footer.setAttribute('id', 'footer');\n        story.appendChild(footer);\n    }\n\n    mapboxgl.accessToken = config.accessToken;\n\n    const transformRequest = (url) => {\n        const hasQuery = url.indexOf(\"?\") !== -1;\n        const suffix = hasQuery ? \"&pluginName=scrollytellingV2\" : \"?pluginName=scrollytellingV2\";\n\n        return {\n          url: url + suffix\n        }\n    }\n\n    var map = new mapboxgl.Map({\n        container: 'map',\n        style: config.style,\n        center: config.chapters[0].location.center,\n        zoom: config.chapters[0].location.zoom,\n        bearing: config.chapters[0].location.bearing,\n        pitch: config.chapters[0].location.pitch,\n        interactive: false,\n        transformRequest: transformRequest\n    });\n\n    if (config.showMarkers) {\n      var tweetContainer = document.createElement(\"div\");\n      var tweet = <Tweet tweetId={config.chapters[0].tweetId} options={{ theme: \"dark\" }} />;\n      ReactDOM.render(tweet, tweetContainer);\n      var popup = new mapboxgl.Popup({\n        offset: [0, -350],\n        focusAfterOpen: false,\n        closeButton: false,\n        closeOnClick: false\n      })\n      .setDOMContent(tweetContainer);\n      popup.setLngLat(config.chapters[0].location.center).addTo(map);\n      popup.addClassName(\"tweet-popup\");\n    }\n\n    // instantiate the scrollama\n    var scroller = scrollama();\n\n    map.on(\"load\", function() {\n        if (config.use3dTerrain) {\n            map.addSource('mapbox-dem', {\n                'type': 'raster-dem',\n                'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',\n                'tileSize': 512,\n                'maxzoom': 14\n            });\n            // add the DEM source as a terrain layer with exaggerated height\n            map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.5 });\n\n            // add a sky layer that will show when the map is highly pitched\n            map.addLayer({\n                'id': 'sky',\n                'type': 'sky',\n                'paint': {\n                    'sky-type': 'atmosphere',\n                    'sky-atmosphere-sun': [0.0, 0.0],\n                    'sky-atmosphere-sun-intensity': 15\n                }\n            });\n        };\n\n        // setup the instance, pass callback functions\n        scroller\n        .setup({\n            step: '.step',\n            offset: 0.5,\n            progress: true\n        })\n        .onStepEnter(response => {\n            var chapter = config.chapters.find(chap => chap.id === response.element.id);\n            response.element.classList.add('active');\n            map[chapter.mapAnimation || 'flyTo'](chapter.location);\n\n            if (config.showMarkers) {\n                popup.setLngLat(chapter.location.center);\n            }\n            if (chapter.callback) {\n                window[chapter.callback]();\n            }\n            if (chapter.rotateAnimation) {\n                map.once('moveend', function() {\n                    const rotateNumber = map.getBearing();\n                    map.rotateTo(rotateNumber + 90, {\n                        duration: 24000, easing: function (t) {\n                            return t;\n                        }\n                    });\n                });\n            }\n        })\n        .onStepExit(response => {\n            var chapter = config.chapters.find(chap => chap.id === response.element.id);\n            response.element.classList.remove('active');\n        });\n    });\n\n    // setup resize event\n    window.addEventListener('resize', scroller.resize);\n  }\n  render() {\n    return (\n      <div id=\"interactive-map\">\n        <div id=\"map\"></div>\n        <div id=\"story\"></div>\n      </div>\n    );\n  }\n}\n\nclass Articles extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    $(\".outer\").each((i, article) => {\n      var height = Math.max(0, Math.min(100, 100 * (article.getBoundingClientRect().top - (window.innerHeight / 3)) / window.innerHeight));\n      $(article).css(\"transform\", \"translateX(\" + -height + \"%)\");\n      $(article).find(\".inner\").css(\"transform\", \"translateX(\" + height + \"%)\");\n    });\n    $(\"#articles\").scroll(function() {\n      $(\".outer\").each((i, article) => {\n        var height = Math.max(0, Math.min(100, 100 * (article.getBoundingClientRect().top - (window.innerHeight / 3)) / window.innerHeight));\n        $(article).css(\"transform\", \"translateX(\" + -height + \"%)\");\n        $(article).find(\".inner\").css(\"transform\", \"translateX(\" + height + \"%)\");\n      });\n    });\n  }\n  renderArticle(i) {\n    var article = articles[i];\n    return (\n      <div className={\"article \" + article.tag}>\n        <a target=\"_blank\" href={article.url}>\n          <img src={article.logo} alt={article.source} />\n        </a>\n        <a target=\"_blank\" href={article.url}>\n          <h1>{article.title}</h1>\n        </a>\n        <div className=\"article-content\">\n          {article.text}\n          <span className=\"outer\" aria-hidden=\"true\">\n            <div className=\"inner\"><span>{article.highlight}</span></div>\n          </span>\n        </div>\n      </div>\n    );\n  }\n  render() {\n    return (\n      <div id=\"articles\">\n        <div id=\"gradient-top\"></div>\n        <div>\n          {this.renderArticle(0)}\n          {this.renderArticle(1)}\n          {this.renderArticle(2)}\n          {this.renderArticle(3)}\n          {this.renderArticle(4)}\n          {this.renderArticle(5)}\n          {this.renderArticle(6)}\n          {this.renderArticle(7)}\n          {this.renderArticle(8)}\n          {this.renderArticle(9)}\n          {this.renderArticle(10)}\n          {this.renderArticle(11)}\n          {this.renderArticle(12)}\n          {this.renderArticle(13)}\n        </div>\n        <div id=\"whitespace\"></div>\n        <div id=\"gradient-bottom\"></div>\n      </div>\n    );\n  }\n}\n\nclass SceneThree extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n  render() {\n    return (\n      <div id=\"scene-three\">\n        <Map />\n        <Articles />\n      </div>\n    );\n  }\n}\n\nexport default SceneThree;\n"]},"metadata":{},"sourceType":"module"}