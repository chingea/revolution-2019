{"ast":null,"code":"var _jsxFileName = \"/Users/charles/Documents/GitHub/1/revolution-2019/src/components/prologue/SceneOne.js\";\nimport React from \"react\";\nimport $ from \"jquery\";\nimport tippy from 'tippy.js';\nimport 'tippy.js/dist/tippy.css';\nimport catalonia from \"../../media/prologue/News Catalonia.mp4\";\nimport chile from \"../../media/prologue/News Chile.mp4\";\nimport colombia from \"../../media/prologue/News Colombia.mp4\";\nimport haiti from \"../../media/prologue/News Haiti.mp4\";\nimport hongkong from \"../../media/prologue/News Hong Kong.mp4\";\nimport iraq from \"../../media/prologue/News Iraq.mp4\";\nimport lebanon from \"../../media/prologue/News Lebanon.mp4\";\nimport sudan from \"../../media/prologue/News Sudan.mp4\";\nimport usa from \"../../media/prologue/News USA.mp4\";\nimport emptyAudio from \"../../media/prologue/empty-audio.mp3\";\nimport captionsCatalonia from \"../../media/prologue/catalonia.vtt\";\nimport captionsSudan from \"../../media/prologue/sudan.vtt\";\nimport captionsColombia from \"../../media/prologue/colombia.vtt\";\nimport captionsHaiti from \"../../media/prologue/haiti.vtt\";\nimport captionsHongKong from \"../../media/prologue/hongkong.vtt\";\nimport captionsIraq from \"../../media/prologue/iraq.vtt\";\nimport captionsLebanon from \"../../media/prologue/lebanon.vtt\";\nimport captionsChile from \"../../media/prologue/chile.vtt\";\nimport captionsUSA from \"../../media/prologue/usa.vtt\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst channels = [catalonia, sudan, colombia, haiti, hongkong, iraq, lebanon, chile, usa];\nconst countries = [\"Catalonia\", \"Sudan\", \"Colombia\", \"Haiti\", \"Hong Kong\", \"Iraq\", \"Lebanon\", \"Chile\", \"USA\"];\nconst captions = [captionsCatalonia, captionsSudan, captionsColombia, captionsHaiti, captionsHongKong, captionsIraq, captionsLebanon, captionsChile, captionsUSA];\n\nclass CaptionsButton extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    tippy('#captions-button', {\n      content: 'Toggle subtitles'\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"captions-button\",\n        className: this.props.captionsOn ? \"captions-button captions-active\" : \"captions-button\",\n        onClick: this.props.toggleCaptions,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far fa-closed-captioning\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 45\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass PlayButton extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"a\", {\n      className: this.props.playing ? \"display-none\" : this.props.canPlay ? \"button play-button\" : \"button-disabled play-button\",\n      onClick: this.props.handleClick,\n      children: this.props.canPlay ? this.props.firstTime ? \"Play\" : \"Replay\" : \"Loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass Channel extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"video\", {\n      onCanPlayThrough: () => this.props.onCanPlayThrough(this.props.index),\n      className: \"grid-video\".concat(this.props.isActive ? \" active\" : \"\"),\n      onMouseEnter: () => this.props.handleMouseEnter(this.props.index),\n      onMouseLeave: this.props.handleMouseLeave,\n      onProgress: e => this.props.onProgress(e, this.props.index),\n      onEnded: this.props.handleEnded,\n      muted: this.props.isActive ? false : \"muted\",\n      children: /*#__PURE__*/_jsxDEV(\"source\", {\n        src: this.props.channel,\n        type: \"video/mp4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nclass Grid extends React.Component {\n  constructor(props) {\n    super(props);\n    this.renderChannel = this.renderChannel.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.props.handleKeyPress);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.props.handleKeyPress);\n  }\n\n  renderChannel(i) {\n    return /*#__PURE__*/_jsxDEV(Channel, {\n      onCanPlayThrough: this.props.onCanPlayThrough,\n      index: i,\n      channel: channels[i],\n      isActive: this.props.activeIndex == i,\n      handleMouseEnter: this.props.handleMouseEnter,\n      handleMouseLeave: this.props.handleMouseLeave,\n      handleEnded: this.props.handleEnded,\n      onProgress: this.props.onProgress\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-header\",\n        children: \"Move cursor or use keyboard arrows to change channels.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"country-name\",\n        children: countries[this.props.activeIndex]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid\",\n          children: [this.renderChannel(0), this.renderChannel(1), this.renderChannel(2), this.renderChannel(3), this.renderChannel(4), this.renderChannel(5), this.renderChannel(6), this.renderChannel(7), this.renderChannel(8)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass Captions extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    $('audio')[0].textTracks[0].oncuechange = function () {\n      if (this.activeCues[0]) {\n        $(\"#captions\").html(this.activeCues[0].text);\n      } else {\n        $(\"#captions\").html(\"\");\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n        src: emptyAudio,\n        children: /*#__PURE__*/_jsxDEV(\"track\", {\n          src: captions[this.props.activeIndex],\n          kind: \"subtitles\",\n          srcLang: \"en\",\n          default: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"captions\",\n        className: this.props.captionsOn ? this.props.activeIndex != null ? \"captions\" : \"display-none\" : \"display-none\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass SceneOne extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playing: false,\n      firstTime: true,\n      canBePlayed: [false, false, false, false, false, false, false, false, false],\n      canPlay: false,\n      activeIndex: null,\n      captionsOn: true,\n      percentageLoaded: 0\n    };\n    this.play = this.play.bind(this);\n    this.handleEnded = this.handleEnded.bind(this);\n    this.handleCanPlayThrough = this.handleCanPlayThrough.bind(this);\n    this.handleMouseEnter = this.handleMouseEnter.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n    this.handleKeyPress = this.handleKeyPress.bind(this);\n    this.toggleCaptions = this.toggleCaptions.bind(this);\n    this.handleProgress = this.handleProgress.bind(this);\n  }\n\n  handleMouseEnter(index) {\n    if (this.state.playing) {\n      this.setState({\n        activeIndex: index\n      });\n    }\n  }\n\n  handleMouseLeave() {\n    this.setState({\n      activeIndex: null\n    });\n  }\n\n  handleKeyPress(e) {\n    switch (e.keyCode) {\n      case 37:\n        if (![0, 3, 6].includes(this.state.activeIndex)) {\n          this.setState({\n            activeIndex: this.state.activeIndex - 1\n          });\n        }\n\n        break;\n\n      case 38:\n        if (![0, 1, 2].includes(this.state.activeIndex)) {\n          this.setState({\n            activeIndex: this.state.activeIndex - 3\n          });\n        }\n\n        break;\n\n      case 39:\n        if (![2, 5, 8].includes(this.state.activeIndex)) {\n          this.setState({\n            activeIndex: this.state.activeIndex + 1\n          });\n        }\n\n        break;\n\n      case 40:\n        if (![6, 7, 8].includes(this.state.activeIndex)) {\n          this.setState({\n            activeIndex: this.state.activeIndex + 3\n          });\n        }\n\n        break;\n\n      default:\n        return;\n    }\n\n    e.preventDefault();\n  }\n\n  play() {\n    if (this.state.canPlay) {\n      $(\"video\").each((i, vid) => {\n        vid.play();\n      });\n      $(\"audio\")[0].play();\n      this.setState({\n        playing: true\n      });\n    }\n  }\n\n  handleEnded() {\n    this.setState({\n      playing: false,\n      firstTime: false\n    });\n  }\n\n  handleCanPlayThrough(index) {\n    var canBePlayed = this.state.canBePlayed;\n    var trueArray = new Array(9).fill(true);\n    canBePlayed[index] = true;\n\n    const countOccurrences = (arr, val) => arr.reduce((a, v) => v === val ? a + 1 : a, 0);\n\n    let canPlay = countOccurrences(canBePlayed, true) === 9;\n    this.setState({\n      canBePlayed: canBePlayed,\n      canPlay: canPlay\n    });\n  }\n\n  handleProgress(e) {\n    if (e.target.buffered.length > 0) {\n      var percentageLoaded = this.state.percentageLoaded + Math.round(e.target.buffered.end(0) / e.target.duration * 100.0 / 9.0);\n      console.log(percentageLoaded);\n      this.setState({\n        percentageLoaded: percentageLoaded\n      });\n    }\n  }\n\n  toggleCaptions() {\n    var captions = this.state.captionsOn;\n    this.setState({\n      captionsOn: !captions\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(CaptionsButton, {\n        captionsOn: this.state.captionsOn,\n        toggleCaptions: this.toggleCaptions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PlayButton, {\n        handleClick: this.play,\n        playing: this.state.playing,\n        firstTime: this.state.firstTime,\n        canPlay: this.state.canPlay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        handleMouseEnter: this.handleMouseEnter,\n        handleMouseLeave: this.handleMouseLeave,\n        handleKeyPress: this.handleKeyPress,\n        activeIndex: this.state.activeIndex,\n        onCanPlayThrough: this.handleCanPlayThrough,\n        onProgress: this.handleProgress,\n        playing: this.state.playing,\n        handleEnded: this.handleEnded\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Captions, {\n        activeIndex: this.state.activeIndex,\n        captionsOn: this.state.captionsOn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default SceneOne;","map":{"version":3,"sources":["/Users/charles/Documents/GitHub/1/revolution-2019/src/components/prologue/SceneOne.js"],"names":["React","$","tippy","catalonia","chile","colombia","haiti","hongkong","iraq","lebanon","sudan","usa","emptyAudio","captionsCatalonia","captionsSudan","captionsColombia","captionsHaiti","captionsHongKong","captionsIraq","captionsLebanon","captionsChile","captionsUSA","channels","countries","captions","CaptionsButton","Component","constructor","props","componentDidMount","content","render","captionsOn","toggleCaptions","PlayButton","playing","canPlay","handleClick","firstTime","Channel","onCanPlayThrough","index","concat","isActive","handleMouseEnter","handleMouseLeave","e","onProgress","handleEnded","channel","Grid","renderChannel","bind","document","addEventListener","handleKeyPress","componentWillUnmount","removeEventListener","i","activeIndex","Captions","textTracks","oncuechange","activeCues","html","text","SceneOne","state","canBePlayed","percentageLoaded","play","handleCanPlayThrough","handleProgress","setState","keyCode","includes","preventDefault","each","vid","trueArray","Array","fill","countOccurrences","arr","val","reduce","a","v","target","buffered","length","Math","round","end","duration","console","log"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport $ from \"jquery\";\nimport tippy from 'tippy.js';\nimport 'tippy.js/dist/tippy.css';\nimport catalonia from \"../../media/prologue/News Catalonia.mp4\";\nimport chile from \"../../media/prologue/News Chile.mp4\";\nimport colombia from \"../../media/prologue/News Colombia.mp4\";\nimport haiti from \"../../media/prologue/News Haiti.mp4\";\nimport hongkong from \"../../media/prologue/News Hong Kong.mp4\";\nimport iraq from \"../../media/prologue/News Iraq.mp4\";\nimport lebanon from \"../../media/prologue/News Lebanon.mp4\";\nimport sudan from \"../../media/prologue/News Sudan.mp4\";\nimport usa from \"../../media/prologue/News USA.mp4\";\nimport emptyAudio from \"../../media/prologue/empty-audio.mp3\";\nimport captionsCatalonia from \"../../media/prologue/catalonia.vtt\";\nimport captionsSudan from \"../../media/prologue/sudan.vtt\";\nimport captionsColombia from \"../../media/prologue/colombia.vtt\";\nimport captionsHaiti from \"../../media/prologue/haiti.vtt\";\nimport captionsHongKong from \"../../media/prologue/hongkong.vtt\";\nimport captionsIraq from \"../../media/prologue/iraq.vtt\";\nimport captionsLebanon from \"../../media/prologue/lebanon.vtt\";\nimport captionsChile from \"../../media/prologue/chile.vtt\";\nimport captionsUSA from \"../../media/prologue/usa.vtt\";\n\nconst channels = [catalonia, sudan, colombia, haiti, hongkong, iraq, lebanon, chile, usa];\n\nconst countries = [\"Catalonia\", \"Sudan\", \"Colombia\", \"Haiti\", \"Hong Kong\", \"Iraq\", \"Lebanon\", \"Chile\", \"USA\"]\n\nconst captions = [captionsCatalonia, captionsSudan, captionsColombia, captionsHaiti, captionsHongKong, captionsIraq, captionsLebanon, captionsChile, captionsUSA];\n\nclass CaptionsButton extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    tippy('#captions-button', {\n        content: 'Toggle subtitles',\n      });\n  }\n  render() {\n    return (\n      <div>\n        <div\n        id=\"captions-button\"\n        className={this.props.captionsOn ? \"captions-button captions-active\" : \"captions-button\"}\n        onClick={this.props.toggleCaptions}><i className=\"far fa-closed-captioning\"></i></div>\n      </div>\n\n    );\n  }\n}\n\nclass PlayButton extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    return (\n      <a\n      className={this.props.playing ? \"display-none\" : this.props.canPlay ? \"button play-button\" : \"button-disabled play-button\"}\n      onClick={this.props.handleClick}>{this.props.canPlay ? this.props.firstTime ? \"Play\" : \"Replay\" : \"Loading\"}</a>\n    );\n  }\n}\n\nclass Channel extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    return (\n        <video\n        onCanPlayThrough={() => this.props.onCanPlayThrough(this.props.index)}\n        className={\"grid-video\".concat(this.props.isActive ? \" active\" : \"\")}\n        onMouseEnter={() => this.props.handleMouseEnter(this.props.index)}\n        onMouseLeave={this.props.handleMouseLeave}\n        onProgress={(e) => this.props.onProgress(e, this.props.index)}\n        onEnded={this.props.handleEnded}\n        muted={this.props.isActive ? false : \"muted\"}>\n          <source src={this.props.channel} type=\"video/mp4\"/>\n        </video>\n\n    );\n  }\n}\n\nclass Grid extends React.Component {\n  constructor(props) {\n    super(props);\n    this.renderChannel = this.renderChannel.bind(this);\n  }\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.props.handleKeyPress);\n  }\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.props.handleKeyPress);\n  }\n  renderChannel(i) {\n    return (\n      <Channel\n      onCanPlayThrough={this.props.onCanPlayThrough}\n      index={i}\n      channel={channels[i]}\n      isActive={this.props.activeIndex == i}\n      handleMouseEnter={this.props.handleMouseEnter}\n      handleMouseLeave={this.props.handleMouseLeave}\n      handleEnded={this.props.handleEnded}\n      onProgress={this.props.onProgress}/>\n    );\n  }\n  render() {\n    return (\n      <div>\n        <div className=\"grid-header\">Move cursor or use keyboard arrows to change channels.</div>\n        <div className=\"country-name\">{countries[this.props.activeIndex]}</div>\n        <div className=\"grid-container\">\n          <div className=\"grid\">\n            {this.renderChannel(0)}\n            {this.renderChannel(1)}\n            {this.renderChannel(2)}\n            {this.renderChannel(3)}\n            {this.renderChannel(4)}\n            {this.renderChannel(5)}\n            {this.renderChannel(6)}\n            {this.renderChannel(7)}\n            {this.renderChannel(8)}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass Captions extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    $('audio')[0].textTracks[0].oncuechange = function() {\n      if (this.activeCues[0]) {\n        $(\"#captions\").html(this.activeCues[0].text);\n      } else {\n        $(\"#captions\").html(\"\");\n      }\n    }\n  }\n  render() {\n    return (\n      <div>\n        <audio src={emptyAudio}>\n          <track src={captions[this.props.activeIndex]} kind=\"subtitles\" srcLang=\"en\" default />\n        </audio>\n        <div\n        id=\"captions\"\n        className={this.props.captionsOn ? this.props.activeIndex != null ? \"captions\" : \"display-none\" : \"display-none\"}></div>\n      </div>\n\n    );\n  }\n}\n\nclass SceneOne extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playing: false,\n      firstTime: true,\n      canBePlayed: [false, false, false, false, false, false, false, false, false],\n      canPlay: false,\n      activeIndex: null,\n      captionsOn: true,\n      percentageLoaded: 0\n    };\n    this.play = this.play.bind(this);\n    this.handleEnded = this.handleEnded.bind(this);\n    this.handleCanPlayThrough = this.handleCanPlayThrough.bind(this);\n    this.handleMouseEnter = this.handleMouseEnter.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n    this.handleKeyPress= this.handleKeyPress.bind(this);\n    this.toggleCaptions = this.toggleCaptions.bind(this);\n    this.handleProgress = this.handleProgress.bind(this);\n  }\n  handleMouseEnter(index) {\n    if (this.state.playing) {\n      this.setState({\n        activeIndex: index\n      });\n    }\n  }\n  handleMouseLeave() {\n    this.setState({\n      activeIndex: null\n    });\n  }\n  handleKeyPress(e) {\n    switch (e.keyCode) {\n      case 37:\n        if (![0, 3, 6].includes(this.state.activeIndex)) {\n          this.setState({\n            activeIndex: this.state.activeIndex - 1\n          });\n        }\n        break;\n      case 38:\n        if (![0, 1, 2].includes(this.state.activeIndex)) {\n          this.setState({\n          activeIndex: this.state.activeIndex - 3\n        });\n      }\n        break;\n      case 39:\n        if (![2, 5, 8].includes(this.state.activeIndex)) {\n          this.setState({\n          activeIndex: this.state.activeIndex + 1\n        });\n      }\n        break;\n      case 40:\n        if (![6, 7, 8].includes(this.state.activeIndex)) {\n          this.setState({\n          activeIndex: this.state.activeIndex + 3\n        });\n      }\n        break;\n      default:\n        return;\n          }\n          e.preventDefault();\n  }\n  play() {\n    if (this.state.canPlay) {\n      $(\"video\").each((i, vid) => {\n        vid.play();\n      });\n      $(\"audio\")[0].play();\n      this.setState({\n        playing: true\n      });\n    }\n  }\n  handleEnded() {\n    this.setState({\n      playing: false,\n      firstTime: false\n    });\n  }\n  handleCanPlayThrough(index) {\n    var canBePlayed = this.state.canBePlayed;\n    var trueArray = new Array(9).fill(true);\n    canBePlayed[index] = true;\n    const countOccurrences = (arr, val) => arr.reduce((a, v) => (v === val ? a + 1 : a), 0);\n    let canPlay = countOccurrences(canBePlayed, true) === 9;\n    this.setState({\n      canBePlayed: canBePlayed,\n      canPlay: canPlay\n    });\n  }\n  handleProgress(e) {\n    if (e.target.buffered.length > 0) {\n      var percentageLoaded = this.state.percentageLoaded + Math.round(e.target.buffered.end(0) / e.target.duration * 100.0 / 9.0);\n      console.log(percentageLoaded);\n      this.setState({\n        percentageLoaded: percentageLoaded\n      });\n    }\n  }\n  toggleCaptions() {\n    var captions = this.state.captionsOn;\n    this.setState({\n      captionsOn: !captions\n    });\n  }\n  render() {\n    return (\n      <div>\n        <CaptionsButton\n        captionsOn={this.state.captionsOn}\n        toggleCaptions={this.toggleCaptions} />\n        <PlayButton\n        handleClick={this.play}\n        playing={this.state.playing}\n        firstTime={this.state.firstTime}\n        canPlay={this.state.canPlay}/>\n        <Grid\n        handleMouseEnter={this.handleMouseEnter}\n        handleMouseLeave={this.handleMouseLeave}\n        handleKeyPress={this.handleKeyPress}\n        activeIndex={this.state.activeIndex}\n        onCanPlayThrough={this.handleCanPlayThrough}\n        onProgress={this.handleProgress}\n        playing={this.state.playing}\n        handleEnded={this.handleEnded}/>\n        <Captions\n        activeIndex={this.state.activeIndex}\n        captionsOn={this.state.captionsOn} />\n      </div>\n    );\n  }\n}\n\nexport default SceneOne;\n"]},"metadata":{},"sourceType":"module"}